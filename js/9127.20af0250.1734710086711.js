"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[9127],{39127:function(t,e,s){s.r(e),s.d(e,{default:function(){return I}});var i=s(23166),n=s(97582),o=s(37981),a=s(86424),r=s(89445),u=s(89334),l=s(68282),c=s(36910),d=s(96520),p=s(69781),g=s(49053),v=s(67317),f=s(50961);let m=class extends((0,r.Wr)(u.Z,a.tA.FormattedAmountMixin)){constructor(...t){super(...t),(0,i.Z)(this,"file",void 0),(0,i.Z)(this,"recipients",void 0),(0,i.Z)(this,"transferTxsAmountInfo",void 0),(0,i.Z)(this,"maxInputAmount",void 0),(0,i.Z)(this,"nextStage",void 0),(0,i.Z)(this,"previousStage",void 0),(0,i.Z)(this,"cancelProcessing",void 0),(0,i.Z)(this,"setInputToken",void 0),(0,i.Z)(this,"isLoggedIn",void 0),(0,i.Z)(this,"inputToken",void 0),(0,i.Z)(this,"adarSwapEnabled",void 0),(0,i.Z)(this,"fixIssuesDialog",!1),(0,i.Z)(this,"isSpinner",!0),(0,i.Z)(this,"currentIssueIdx",0),(0,i.Z)(this,"showSelectInputAssetDialog",!1)}onInputAssetSelected(t){this.setInputToken(t),this.showSelectInputAssetDialog=!1}created(){setTimeout((()=>{this.isSpinner=!1}),1e3)}get nextButtonDisabled(){return!this.recipientsCount}get fileName(){return this.file?.name}get lastModified(){return this.formatDate(this.file?.lastModified||0,"D MMM")}get fileSize(){return new o.FPNumber(this.file?.size||1).div(new o.FPNumber(1024)).dp(2).toLocaleString()}get recipientsCount(){return this.recipients?.length}get incorrectRecipients(){return this.recipients.filter((t=>!this.validateRecipient(t))).map((t=>({...t,amount:t.amount?.toString(),usd:t.usd.toString()})))}get incorrectRecipientsLength(){return this.incorrectRecipients.length}get nextButtonTitle(){return this.incorrectRecipients.length>0?`${this.t("adar.routeAssets.stages.processTemplate.fixButton")}`:`${this.t("adar.routeAssets.continue")}`}get swapDataInfo(){return this.recipients.reduce(((t,e)=>e.useTransfer||e.asset.address===this.inputToken.address?t:{recipientsNumber:++t.recipientsNumber,amount:t.amount.add(e.amount??o.FPNumber.ZERO),usd:t.usd.add(e.usd??o.FPNumber.ZERO)}),{recipientsNumber:0,amount:o.FPNumber.ZERO,usd:o.FPNumber.ZERO})}get hideSwapSection(){return!this.adarSwapEnabled||this.recipients.every((t=>t.useTransfer))}get fpBalance(){const t=(0,f.rh)(this.inputToken);return t?o.FPNumber.fromCodecValue(t,this.inputToken.decimals):o.FPNumber.ZERO}nextButtonAction(){this.incorrectRecipients.length>0?this.fixIssuesDialog=!0:this.nextStage()}cancelButtonAction(){this.cancelProcessing()}validateRecipient(t){return v.ZP.validate(t)}changeIssueIdx(t){this.currentIssueIdx=t}onIssueFixedChanged(t){t<1?this.fixIssuesDialog=!1:this.currentIssueIdx<=t&&(this.currentIssueIdx=t-1)}};(0,n.gn)([g.Yn.routeAssets.file],m.prototype,"file",void 0),(0,n.gn)([g.Yn.routeAssets.recipients],m.prototype,"recipients",void 0),(0,n.gn)([g.Yn.routeAssets.transferTxsAmountInfo],m.prototype,"transferTxsAmountInfo",void 0),(0,n.gn)([g.Yn.routeAssets.maxInputAmount],m.prototype,"maxInputAmount",void 0),(0,n.gn)([g.aD.routeAssets.processingNextStage],m.prototype,"nextStage",void 0),(0,n.gn)([g.aD.routeAssets.processingPreviousStage],m.prototype,"previousStage",void 0),(0,n.gn)([g.aD.routeAssets.cancelProcessing],m.prototype,"cancelProcessing",void 0),(0,n.gn)([g.aD.routeAssets.setInputToken],m.prototype,"setInputToken",void 0),(0,n.gn)([g.Yn.wallet.account.isLoggedIn],m.prototype,"isLoggedIn",void 0),(0,n.gn)([g.Yn.routeAssets.inputToken],m.prototype,"inputToken",void 0),(0,n.gn)([g.Yn.routeAssets.adarSwapEnabled],m.prototype,"adarSwapEnabled",void 0),(0,n.gn)([(0,r.RL)("incorrectRecipientsLength",{deep:!0})],m.prototype,"onIssueFixedChanged",null),m=(0,n.gn)([(0,r.wA)({components:{FixIssuesDialog:(0,d.y)(c.EC.RouteAssetsFixIssuesDialog),TokenLogo:a.wx.TokenLogo,InfoLine:a.wx.InfoLine,SelectToken:(0,p.kF)(l.z8.SelectToken),TokenAddress:a.wx.TokenAddress}})],m);var h=m,b=(0,s(1001).Z)(h,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isSpinner||!t.fileName,expression:"isSpinner || !fileName"}],staticClass:"container route-assets-processing-template"},[e("div",{staticClass:"route-assets__page-header-title"},[t._v(t._s(t.t("adar.routeAssets.stages.processTemplate.title")))]),e("div",{staticClass:"route-assets__page-header-description"},[t._v(" "+t._s(t.t("adar.routeAssets.stages.processTemplate.description"))+" ")]),!t.isSpinner&&t.fileName?e("div",{staticClass:"content-container"},[e("div",{staticClass:"route-assets-processing-template__file-info"},[e("div",[e("svg",{staticClass:"file-icon",attrs:{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7 2C4.79086 2 3 3.79086 3 6V18C3 20.2091 4.79086 22 7 22H17C19.2091 22 21 20.2091 21 18V7.65685C21 6.59599 20.5786 5.57857 19.8284 4.82843L18.1716 3.17157C17.4214 2.42143 16.404 2 15.3431 2H7ZM8 6.25C7.58579 6.25 7.25 6.58579 7.25 7C7.25 7.41421 7.58579 7.75 8 7.75H16C16.4142 7.75 16.75 7.41421 16.75 7C16.75 6.58579 16.4142 6.25 16 6.25H8ZM7.25 12C7.25 11.5858 7.58579 11.25 8 11.25H16C16.4142 11.25 16.75 11.5858 16.75 12C16.75 12.4142 16.4142 12.75 16 12.75H8C7.58579 12.75 7.25 12.4142 7.25 12ZM8 16.25C7.58579 16.25 7.25 16.5858 7.25 17C7.25 17.4142 7.58579 17.75 8 17.75H12C12.4142 17.75 12.75 17.4142 12.75 17C12.75 16.5858 12.4142 16.25 12 16.25H8Z"}})])]),e("div",[e("div",[t._v(t._s(t.fileName))]),e("div",{staticClass:"metadata"},[t._v(t._s(`${t.lastModified} Â· ${t.fileSize} kb`))])])]),e("div",{staticClass:"route-assets-processing-template__amount-info-container"},[t.transferTxsAmountInfo.length?e("div",[e("div",{staticClass:"tx-type-title"},[e("div",{staticClass:"tx-type-label"},[t._v(t._s(t.t("operations.Transfer")))]),e("s-tooltip",{attrs:{content:t.t("adar.routeAssets.stages.processTemplate.swapNotNecessary"),"border-radius":"mini"}},[e("s-icon",{attrs:{name:"info-16",size:"16px"}})],1)],1),t._l(t.transferTxsAmountInfo,(function(s,i){return e("div",{key:i,staticClass:"amount-info"},[e("div",{staticClass:"amount-info__asset-symbol"},[e("token-logo",{staticClass:"token-logo",attrs:{token:s.asset,size:"big"}}),e("div",[e("div",[t._v(t._s(s.asset.symbol))]),e("token-address",t._b({staticClass:"input-value"},"token-address",s.asset,!1))],1)],1),e("div",{staticClass:"amount-info__info"},[e("info-line",{attrs:{label:t.t("adar.routeAssets.recipients"),value:`${s.recipientsNumber??0}`,"is-formatted":""}}),e("info-line",{attrs:{label:`${t.t("adar.routeAssets.stages.routing.amountText.default")} ${s.asset.symbol}`,value:s.totalAmount.toLocaleString(5,!0),"fiat-value":s.usd.toLocaleString(2),"is-formatted":""}}),e("info-line",{attrs:{label:`${t.t("adar.routeAssets.stages.reviewDetails.swapless.balance")} ${s.asset.symbol}`,value:s.userBalance.toLocaleString(5,!0),"fiat-value":t.getFiatAmountByFPNumber(s.userBalance,s.asset),"is-formatted":""}})],1)])}))],2):t._e(),t.hideSwapSection?t._e():e("div",[e("div",{staticClass:"tx-type-title"},[e("div",{staticClass:"tx-type-label"},[t._v(t._s(t.t("operations.Swap")))]),e("s-tooltip",{attrs:{content:t.t("adar.routeAssets.stages.processTemplate.swapNecessary"),"border-radius":"mini"}},[e("s-icon",{attrs:{name:"info-16",size:"16px"}})],1)],1),e("div",{staticClass:"amount-info"},[e("div",{staticClass:"amount-info__token-selection"},[e("div",[t._v(t._s(t.t("adar.routeAssets.dialogs.selectInputAssetDialog.title")))]),e("div",{staticClass:"amount-info__asset-symbol pointer",on:{click:()=>{t.showSelectInputAssetDialog=!0}}},[e("token-logo",{staticClass:"token-logo",attrs:{token:t.inputToken,size:"big"}}),e("div",[t._v(t._s(t.inputToken.symbol))]),e("div",[e("s-icon",{attrs:{name:"arrows-chevron-down-rounded-24",size:"20"}})],1)],1)]),e("div",{staticClass:"amount-info__info"},[e("info-line",{attrs:{label:t.t("adar.routeAssets.recipients"),value:`${t.swapDataInfo.recipientsNumber??0}`,"is-formatted":""}}),e("info-line",{attrs:{label:`${t.t("adar.routeAssets.stages.routing.amountText.default")} ${t.inputToken.symbol}`,value:t.maxInputAmount.totalAmount.toLocaleString(5,!0),"fiat-value":t.swapDataInfo.usd.toLocaleString(2),"is-formatted":""}}),e("info-line",{attrs:{"asset-symbol":t.inputToken.symbol,label:t.t("adar.routeAssets.stages.reviewDetails.swapless.balance"),value:t.fpBalance.toLocaleString(5,!0),"is-formatted":""}})],1)])])]),e("div",{staticClass:"buttons-container"},[e("s-button",{staticClass:"s-typography-button--big",attrs:{type:"primary",disabled:t.nextButtonDisabled},on:{click:function(e){return e.stopPropagation(),t.nextButtonAction.apply(null,arguments)}}},[t._v(" "+t._s(t.nextButtonTitle)+" ")]),e("s-button",{staticClass:"s-typography-button--big",attrs:{type:"secondary"},on:{click:function(e){return e.stopPropagation(),t.cancelButtonAction.apply(null,arguments)}}},[t._v(" "+t._s(t.t("adar.routeAssets.cancelProcessing"))+" ")])],1)]):t._e(),e("fix-issues-dialog",{attrs:{visible:t.fixIssuesDialog,recipient:t.incorrectRecipients[t.currentIssueIdx],currentIssueIdx:t.currentIssueIdx,totalIssuesCount:t.incorrectRecipients.length},on:{"update:visible":function(e){t.fixIssuesDialog=e},changeIssueIdx:t.changeIssueIdx}}),e("select-token",{attrs:{visible:t.showSelectInputAssetDialog,connected:t.isLoggedIn},on:{"update:visible":function(e){t.showSelectInputAssetDialog=e},select:t.onInputAssetSelected}})],1)}),[],!1,null,"be8ff60e",null),I=b.exports}}]);
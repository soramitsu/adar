"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[4591],{74591:function(t,s,e){e.r(s),e.d(s,{default:function(){return p}});var i=e(23166),a=(e(70560),e(97582)),r=e(86424),o=e(89445),n=e(73845),h=e(14930),c=e(25013),l=e(68282),u=e(69781),d=e(49053);const g=["assetAddress","symbol","hash","blockId","txId","externalBlockId","externalHash","parachainBlockId","parachainHash","relaychainBlockId","relaychainHash"];let y=class extends((0,o.Wr)(h.Z,n.Z,c.Z,r.tA.PaginationSearchMixin,r.tA.NumberFormatterMixin)){constructor(...t){super(...t),(0,i.Z)(this,"registeredAssets",void 0),(0,i.Z)(this,"historyPage",void 0),(0,i.Z)(this,"pageAmount",8),(0,i.Z)(this,"loading",!0)}get historyList(){return Object.values(this.history)}get filteredHistory(){return this.getFilteredHistory(this.sortTransactions(this.historyList,this.isLtrDirection))}get total(){return this.filteredHistory.length}get hasHistory(){return this.filteredHistoryItems&&this.total>0}get filteredHistoryItems(){const t=this.isLtrDirection?Math.min(this.currentPage*this.pageAmount,this.filteredHistory.length):Math.max((this.lastPage-this.currentPage+1)*this.pageAmount-this.directionShift,0),s=this.isLtrDirection?Math.max(t-this.pageAmount,0):Math.max((this.lastPage-this.currentPage)*this.pageAmount-this.directionShift,0);return this.sortTransactions(this.getPageItems(this.filteredHistory,s,t),!0)}created(){this.withParentLoading((async()=>{this.updateInternalHistory(),this.updateExternalHistory(),1!==this.historyPage&&(this.currentPage=this.historyPage,1!==this.currentPage&&this.currentPage===this.lastPage&&(this.isLtrDirection=!1))})).finally((()=>{this.loading=!1}))}getFilteredHistory(t){if(!this.query)return t;const s=this.query.toLowerCase().trim();return t.filter((t=>{const e=this.registeredAssets[t.assetAddress],i=[e?.address];return g.forEach((s=>{s in t&&i.push(t[s])})),i.some((t=>String(t).toLowerCase().includes(s)))}))}formatAmount(t,s=!1){const e=s?t.amount2??t.amount:t.amount;if(!t.assetAddress||!e)return"";const i=this.registeredAssets[t.assetAddress],a=i?.decimals;return this.formatStringValue(e,a)}historyStatusClasses(t){const s="history-item-status",e=[s];return this.isWaitingForAction(t)?e.push(`${s}--info`):this.isFailedState(t)?e.push(`${s}--error`):this.isSuccessState(t)?e.push(`${s}--success`):e.push(`${s}--pending`),e.join(" ")}historyStatusIconName(t){return this.isWaitingForAction(t)?"notifications-alert-triangle-24":this.isFailedState(t)?"basic-clear-X-24":this.isSuccessState(t)?"basic-check-marks-24":"time-time-24"}historyStatusText(t){return this.isWaitingForAction(t)?this.t("bridgeHistory.statusAction"):""}async handlePaginationClick(t){let s=1;switch(t){case r.WALLET_CONSTS.PaginationButton.Prev:s=this.currentPage-1;break;case r.WALLET_CONSTS.PaginationButton.Next:s=this.currentPage+1,s===this.lastPage&&(this.isLtrDirection=!1);break;case r.WALLET_CONSTS.PaginationButton.First:this.isLtrDirection=!0;break;case r.WALLET_CONSTS.PaginationButton.Last:s=this.lastPage,this.isLtrDirection=!1}this.currentPage=s,this.setHistoryPage(this.currentPage)}handleBack(){this.setHistoryPage(1),this.navigateToBridge()}handleResetSearch(){this.resetPage(),this.resetSearch()}};(0,a.gn)([d.SB.assets.registeredAssets],y.prototype,"registeredAssets",void 0),(0,a.gn)([d.SB.bridge.historyPage],y.prototype,"historyPage",void 0),y=(0,a.gn)([(0,o.wA)({components:{GenericPageHeader:(0,u.kF)(l.z8.GenericPageHeader),SwapStatusActionBadge:(0,u.kF)(l.z8.SwapStatusActionBadge),SearchInput:r.wx.SearchInput,FormattedAmount:r.wx.FormattedAmount,HistoryPagination:r.wx.HistoryPagination}})],y);var m=y,p=(0,e(1001).Z)(m,(function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"history-container"},[s("s-card",{directives:[{name:"loading",rawName:"v-loading",value:t.parentLoading,expression:"parentLoading"}],staticClass:"history-content",attrs:{"border-radius":"medium",shadow:"always",primary:""}},[s("generic-page-header",{attrs:{"has-button-back":"",title:t.t("bridgeHistory.title")},on:{back:t.handleBack}},[s("s-button",{attrs:{type:"action",icon:"arrows-swap-90-24",disabled:t.networkHistoryLoading,tooltip:t.t("bridgeHistory.restoreHistory")},on:{click:function(s){return t.updateExternalHistory(!0)}}})],1),s("s-form",{staticClass:"history-form",attrs:{"show-message":!1}},[t.historyList.length?s("search-input",{staticClass:"history--search",attrs:{placeholder:t.t("bridgeHistory.filterPlaceholder"),autofocus:""},on:{clear:t.handleResetSearch},model:{value:t.query,callback:function(s){t.query=s},expression:"query"}}):t._e(),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"history-items"},[t.hasHistory?t._l(t.filteredHistoryItems,(function(e){return s("div",{directives:[{name:"button",rawName:"v-button"}],key:`history-${e.id}`,staticClass:"history-item",attrs:{tabindex:"0"},on:{click:function(s){return t.showHistory(e.id)}}},[s("div",{staticClass:"history-item-info"},[s("div",{staticClass:"history-item-title p4"},[s("formatted-amount",{attrs:{"value-can-be-hidden":"",value:t.formatAmount(e,!1),"asset-symbol":e.symbol}}),s("i",{class:`network-icon network-icon--${t.getNetworkIcon(t.isOutgoingTx(e)?0:e.externalNetwork)}`}),s("span",{staticClass:"history-item-title-separator"},[t._v(" "+t._s(t.t("bridgeTransaction.for"))+" ")]),s("formatted-amount",{attrs:{"value-can-be-hidden":"",value:t.formatAmount(e,!0),"asset-symbol":e.symbol}}),s("i",{class:`network-icon network-icon--${t.getNetworkIcon(t.isOutgoingTx(e)?e.externalNetwork:0)}`})],1),s("div",{staticClass:"history-item-date"},[t._v(t._s(t.formatDatetime(e)))])]),s("div",{class:t.historyStatusClasses(e)},[s("div",{staticClass:"history-item-status-text"},[t._v(t._s(t.historyStatusText(e)))]),s("s-icon",{staticClass:"history-item-status-icon",attrs:{name:t.historyStatusIconName(e),size:"16"}})],1)])})):s("p",{staticClass:"history-empty p4"},[t._v(t._s(t.t("bridgeHistory.empty")))]),t.hasHistory?s("history-pagination",{attrs:{"current-page":t.currentPage,"page-amount":t.pageAmount,loading:t.loading,total:t.total,"last-page":t.lastPage},on:{"pagination-click":t.handlePaginationClick}}):t._e()],2)],1)],1)],1)}),[],!1,null,"d9111f68",null).exports}}]);
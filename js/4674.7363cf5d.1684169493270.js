"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[4674],{64674:function(s,t,e){e.r(t),e.d(t,{default:function(){return _}});var i,a=e(60760),o=e(70655),n=e(52612),c=e.n(n),l=e(53545),d=e(50576),r=e(32806),h=e(91898),u=e(16546),A=e(80710),v=e(74614),b=e(82753);function p(s,t){return s.reduce(((s,e)=>(!d.hi.assets.isWhitelist(e,t)&&e.decimals&&(s[e.address]=e),s)),{})}!function(s){s.Assets="assets",s.Custom="custom"}(i||(i={}));let y=class extends((0,l.Wr)(r.Z,h.Z,d.tA.LoadingMixin)){constructor(...s){super(...s),(0,a.Z)(this,"tokenTabs",[i.Assets,i.Custom]),(0,a.Z)(this,"tabValue",c()(this.tokenTabs)),(0,a.Z)(this,"connected",void 0),(0,a.Z)(this,"asset",void 0),(0,a.Z)(this,"disabledCustom",void 0),(0,a.Z)(this,"isMainTokenProviders",void 0),(0,a.Z)(this,"shouldBalanceBeHidden",void 0),(0,a.Z)(this,"assets",void 0),(0,a.Z)(this,"accountAssets",void 0),(0,a.Z)(this,"libraryTheme",void 0),(0,a.Z)(this,"whitelistAssets",void 0),(0,a.Z)(this,"isLoggedIn",void 0),(0,a.Z)(this,"whitelist",void 0),(0,a.Z)(this,"whitelistIdsBySymbol",void 0),(0,a.Z)(this,"accountAssetsAddressTable",void 0),(0,a.Z)(this,"addAsset",void 0)}async handleTabReset(s){s&&(this.tabValue=c()(this.tokenTabs))}get nonWhitelistAssets(){return p(this.assets,this.whitelist)}get nonWhitelistAccountAssets(){return p(this.accountAssets,this.whitelist)}get whitelistAssetsList(){const s=this.isMainTokenProviders?this.getMainSources():this.whitelistAssets,{asset:t,accountAssetsAddressTable:e}=this;return this.getAssetsWithBalances({assets:s,accountAssetsAddressTable:e,excludeAsset:t}).sort(this.sortByBalance())}get filteredWhitelistTokens(){return this.filterAssetsByQuery(this.whitelistAssetsList)(this.searchQuery)}get isCustomTabActive(){return this.tabValue===i.Custom}get shouldAssetsListBeShown(){return!(this.isCustomTabActive&&!this.activeAssetsList.length&&this.searchQuery)}get assetsListSize(){return this.isCustomTabActive?5:6}get activeAssetsList(){return this.isCustomTabActive?this.sortedNonWhitelistAccountAssets:this.filteredWhitelistTokens}get activeSearchPlaceholder(){return this.t(this.isCustomTabActive?"selectToken.custom.search":"selectToken.searchPlaceholder")}get alreadyAttached(){return!!this.nonWhitelistAccountAssets[this.searchQuery]}get customAsset(){return this.nonWhitelistAssets[this.searchQuery]??null}get sortedNonWhitelistAccountAssets(){const{asset:s,accountAssetsAddressTable:t}=this;return this.getAssetsWithBalances({assets:Object.values(this.nonWhitelistAccountAssets),accountAssetsAddressTable:t,excludeAsset:s}).sort(this.sortByBalance())}getMainSources(){const s=[b.XOR.address,b.XSTUSD.address];return this.whitelistAssets.filter((t=>s.includes(t.address)))}async handleAddAsset(){this.customAsset&&(this.isLoggedIn?(await this.withLoading((async()=>await this.addAsset((this.customAsset||{}).address))),this.handleClearSearch()):this.selectAsset(this.customAsset))}handleRemoveCustomAsset(s){d.hi.assets.removeAccountAsset(s.address)}handleTabChange(s){this.tabValue=s,this.clearAndFocusSearch()}};(0,o.__decorate)([(0,l.fI)({default:!1,type:Boolean})],y.prototype,"connected",void 0),(0,o.__decorate)([(0,l.fI)({default:u.u8,type:Object})],y.prototype,"asset",void 0),(0,o.__decorate)([(0,l.fI)({default:!1,type:Boolean})],y.prototype,"disabledCustom",void 0),(0,o.__decorate)([(0,l.fI)({default:!1,type:Boolean})],y.prototype,"isMainTokenProviders",void 0),(0,o.__decorate)([v.SB.wallet.settings.shouldBalanceBeHidden],y.prototype,"shouldBalanceBeHidden",void 0),(0,o.__decorate)([v.SB.wallet.account.assets],y.prototype,"assets",void 0),(0,o.__decorate)([v.SB.wallet.account.accountAssets],y.prototype,"accountAssets",void 0),(0,o.__decorate)([v.Yn.libraryTheme],y.prototype,"libraryTheme",void 0),(0,o.__decorate)([v.Yn.assets.whitelistAssets],y.prototype,"whitelistAssets",void 0),(0,o.__decorate)([v.Yn.wallet.account.isLoggedIn],y.prototype,"isLoggedIn",void 0),(0,o.__decorate)([v.Yn.wallet.account.whitelist],y.prototype,"whitelist",void 0),(0,o.__decorate)([v.Yn.wallet.account.whitelistIdsBySymbol],y.prototype,"whitelistIdsBySymbol",void 0),(0,o.__decorate)([v.Yn.wallet.account.accountAssetsAddressTable],y.prototype,"accountAssetsAddressTable",void 0),(0,o.__decorate)([v.aD.wallet.account.addAsset],y.prototype,"addAsset",void 0),(0,o.__decorate)([(0,l.RL)("visible")],y.prototype,"handleTabReset",null),y=(0,o.__decorate)([(0,l.wA)({components:{DialogBase:d.wx.DialogBase,SelectAssetList:(0,A.kF)(u.z8.SelectAssetList),TokenAddress:d.wx.TokenAddress,SearchInput:d.wx.SearchInput,AddAssetDetailsCard:d.wx.AddAssetDetailsCard}})],y);var m=y,_=(0,e(1001).Z)(m,(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("dialog-base",{attrs:{visible:s.isVisible,title:s.t("selectToken.title"),"custom-class":"asset-select"},on:{"update:visible":function(t){s.isVisible=t}}},[e("s-tabs",{staticClass:"s-tabs--exchange",attrs:{value:s.tabValue,type:"rounded"},on:{input:s.handleTabChange}},[e("search-input",{ref:"search",staticClass:"token-search",attrs:{placeholder:s.activeSearchPlaceholder,autofocus:""},on:{clear:s.handleClearSearch},model:{value:s.query,callback:function(t){s.query=t},expression:"query"}}),e("s-tab",{attrs:{label:s.t("selectToken.assets.title"),name:"assets"}}),e("s-tab",{staticClass:"asset-select__info",attrs:{disabled:s.disabledCustom,label:s.t("selectToken.custom.title"),name:"custom"}},[s.customAsset?[s.alreadyAttached?e("span",[s._v(s._s(s.t("selectToken.custom.alreadyAttached")))]):e("add-asset-details-card",{attrs:{asset:s.customAsset,theme:s.libraryTheme,whitelist:s.whitelist,"whitelist-ids-by-symbol":s.whitelistIdsBySymbol,loading:s.loading},on:{add:s.handleAddAsset}})]:s.searchQuery?e("span",[s._v(s._s(s.t("selectToken.custom.notFound")))]):s._e(),s.connected&&s.sortedNonWhitelistAccountAssets.length?e("div",{staticClass:"token-list_text"},[s._v(" "+s._s(s.sortedNonWhitelistAccountAssets.length)+" "+s._s(s.t("selectToken.custom.text"))+" ")]):s._e()],2),e("select-asset-list",{directives:[{name:"show",rawName:"v-show",value:s.shouldAssetsListBeShown,expression:"shouldAssetsListBeShown"}],attrs:{assets:s.activeAssetsList,size:s.assetsListSize,connected:s.connected,"should-balance-be-hidden":s.shouldBalanceBeHidden,"has-fiat-value":""},on:{click:s.selectAsset},scopedSlots:s._u([{key:"action",fn:function(t){return[s.isCustomTabActive?e("div",{staticClass:"token-item__remove",on:{click:function(e){return e.stopPropagation(),s.handleRemoveCustomAsset(t)}}},[e("s-icon",{attrs:{name:"basic-trash-24"}})],1):s._e()]}}])})],1)],1)}),[],!1,null,"db5f9f08",null).exports}}]);
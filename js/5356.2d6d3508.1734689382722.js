"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[5356],{65356:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var d=n(23166),o=n(97582),s=n(10656),i=n(86424),c=n(4588),r=n.n(c),a=n(89445),l=n(42178),h=n(68282),N=n(69781),u=n(53146),g=n(49491);const f="NodeListView",w="NodeInfoView";let v=class extends((0,a.Wr)(l.Z,i.tA.LoadingMixin)){constructor(...e){super(...e),(0,d.Z)(this,"connection",void 0),(0,d.Z)(this,"visibility",void 0),(0,d.Z)(this,"setVisibility",void 0),(0,d.Z)(this,"network",void 0),(0,d.Z)(this,"currentView",f),(0,d.Z)(this,"selectedNode",{})}get visible(){return this.visibility}set visible(e){this.setVisibility(e),e||this.handleBack()}get isSoraNetwork(){return this.network===s.SubNetworkId.Mainnet}get nodeAddressConnecting(){return this.connection.nodeAddressConnecting}get connectionAllowance(){return this.connection.connectionAllowance}get connectedNodeAddress(){return this.nodeAddressConnecting?"":this.connection.node?.address??""}set connectedNodeAddress(e){if(e===this.connectedNodeAddress)return;const t=this.findNodeInListByAddress(e);this.handleNode(t)}get isSelectedNodeRemovable(){return!!this.connection.customNodes.find((e=>e.address===this.selectedNode?.address))}get isSelectedNodeConnected(){return this.isConnectedNodeAddress(this.selectedNode?.address)}get existingNodeIsSelected(){return!!this.findNodeInListByAddress(this.selectedNode?.address??"")}get isNodeListView(){return this.currentView===f}get dialogCustomClass(){return this.isNodeListView?"":"select-node-dialog--add-node"}async handleNode(e,t=!1){try{await this.setCurrentNode(e,t),this.selectedNode.address===e.address&&this.currentView===w&&this.handleBack()}catch(e){}}async removeNode(e){this.connection.removeCustomNode(e),this.handleBack(),this.isConnectedNodeAddress(e.address)&&await this.setCurrentNode(this.connection.defaultNodes[0])}navigateToNodeInfo(e){this.selectedNode=e??{},this.changeView(w)}handleBack(){this.changeView(f)}getNodePermittedData(e){return r()(Object.keys(g.X))(e)}async setCurrentNode(e,t=!1){const n=this.getNodePermittedData(e);if(t){const e=this.findInList(this.connection.defaultNodes,n.address);if(e){const t=new u.x({key:"node.errors.existing",payload:{title:e.chain}});return this.handleNodeError(t,e)}}await this.connection.connect({node:n,onError:this.handleNodeError,onDisconnect:this.handleNodeDisconnect,onReconnect:this.handleNodeConnect,onConnect:this.handleNodeConnect}),t&&this.connection.updateCustomNode(n),this.selectedNode=this.findNodeInListByAddress(n.address)}changeView(e){this.currentView=e}findInList(e,t){return e.find((e=>e.address===t))}findNodeInListByAddress(e){return this.findInList(this.connection.nodeList,e)}isConnectedNodeAddress(e){return!!this.connectedNodeAddress&&!!e&&this.connectedNodeAddress===e}};(0,o.gn)([(0,a.fI)({required:!0,type:Object})],v.prototype,"connection",void 0),(0,o.gn)([(0,a.fI)({required:!0,type:Boolean})],v.prototype,"visibility",void 0),(0,o.gn)([(0,a.fI)({required:!0,type:Function})],v.prototype,"setVisibility",void 0),(0,o.gn)([(0,a.fI)({default:()=>s.SubNetworkId.Mainnet,type:String})],v.prototype,"network",void 0),v=(0,o.gn)([(0,a.wA)({components:{DialogBase:i.wx.DialogBase,SelectNode:(0,N.kF)(h.z8.SelectNode),NodeInfo:(0,N.kF)(h.z8.NodeInfo)}})],v);var b=v,y=(0,n(1001).Z)(b,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("dialog-base",{class:["select-node-dialog",e.dialogCustomClass],attrs:{visible:e.visible,title:e.t("selectNodeDialog.title")},on:{"update:visible":function(t){e.visible=t}}},[e.isNodeListView?t("select-node",{attrs:{"node-address-connecting":e.nodeAddressConnecting,nodes:e.connection.nodeList,"handle-node":e.handleNode,"view-node":e.navigateToNodeInfo,disabled:!e.connectionAllowance},model:{value:e.connectedNodeAddress,callback:function(t){e.connectedNodeAddress=t},expression:"connectedNodeAddress"}}):t("node-info",{attrs:{node:e.selectedNode,existing:e.existingNodeIsSelected,"node-address-connecting":e.nodeAddressConnecting,removable:e.isSelectedNodeRemovable,connected:e.isSelectedNodeConnected,"handle-back":e.handleBack,"handle-node":e.handleNode,"remove-node":e.removeNode,"show-tutorial":e.isSoraNetwork,disabled:!e.connectionAllowance}})],1)}),[],!1,null,null,null).exports}}]);
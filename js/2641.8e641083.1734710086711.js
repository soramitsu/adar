"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[2641],{62641:function(t,e,i){i.r(e),i.d(e,{default:function(){return p}});var a=i(23166),n=i(97582),s=i(37981),o=i(69826),l=i(86424),r=i(89445),u=i(68282),c=i(69781),h=i(49053),b=i(50961);let d=class extends((0,r.Wr)(l.tA.TransactionMixin,l.tA.DialogMixin,l.tA.FormattedAmountMixin)){constructor(...t){super(...t),(0,a.Z)(this,"xorSymbol",o.XOR.symbol),(0,a.Z)(this,"tokenInput",void 0),(0,a.Z)(this,"balance",void 0),(0,a.Z)(this,"editableFiat",void 0),(0,a.Z)(this,"asset",void 0),(0,a.Z)(this,"networkFees",void 0),(0,a.Z)(this,"accountXor",void 0),(0,a.Z)(this,"value","")}async handleDialogVisibility(t){await this.$nextTick(),this.value="",this.tokenInput?.focus()}get fpBalance(){return this.getFPNumberFromCodec(this.balance,this.asset.decimals)}get xorBalance(){return this.getFPNumberFromCodec(this.accountXor?.balance?.transferable??u.m8)}get assetWithBalance(){return{...this.asset,balance:{transferable:this.balance}}}get title(){return`Burn ${this.tokenSymbol}`}get tokenSymbol(){return this.asset.symbol}get networkFee(){return this.networkFees[s.Operation.Burn]}get fpNetworkFee(){return this.getFPNumberFromCodec(this.networkFee)}get networkFeeFormatted(){return this.formatCodecNumber(this.networkFee)}get emptyValue(){return!+this.value}get isMaxAvailable(){return!!this.accountXor&&(0,b.oI)(this.assetWithBalance,this.value??0,this.networkFee,this.accountXor)}get isInsufficientBalance(){return this.fpBalance.sub(this.value||0).isLtZero()}get isInsufficientXorForFee(){return this.xorBalance.sub(this.fpNetworkFee).isLtZero()}get disabled(){return this.loading||this.isInsufficientXorForFee||this.emptyValue||this.isInsufficientBalance}get valuePercent(){if(!this.value)return 0;const t=this.getFPNumber(this.value,this.asset.decimals).div(this.fpBalance).mul(u.Tv).toNumber(0);return t>u.Tv?u.Tv:t}handlePercentChange(t){this.value=this.fpBalance.mul(t/u.Tv).toString()}handleMaxValue(){this.value=this.fpBalance.toString()}async handleBurn(){if(this.isInsufficientBalance)this.$alert(this.t("insufficientBalanceText",{tokenSymbol:this.tokenSymbol}),{title:this.t("errorText")});else try{await this.withNotifications((async()=>{await l.hi.assets.burn(this.asset,this.value)}))}catch(t){console.error(t)}this.isVisible=!1}};(0,n.gn)([(0,r.Rl)("tokenInput")],d.prototype,"tokenInput",void 0),(0,n.gn)([(0,r.fI)({default:u.m8,type:String})],d.prototype,"balance",void 0),(0,n.gn)([(0,r.fI)({default:!1,type:Boolean})],d.prototype,"editableFiat",void 0),(0,n.gn)([(0,r.fI)({default:u.u8,type:Object})],d.prototype,"asset",void 0),(0,n.gn)([h.SB.wallet.settings.networkFees],d.prototype,"networkFees",void 0),(0,n.gn)([h.Yn.assets.xor],d.prototype,"accountXor",void 0),(0,n.gn)([(0,r.RL)("visible")],d.prototype,"handleDialogVisibility",null),d=(0,n.gn)([(0,r.wA)({components:{DialogBase:l.wx.DialogBase,InfoLine:l.wx.InfoLine,TokenInput:(0,c.kF)(u.z8.TokenInput)}})],d);var f=d,p=(0,i(1001).Z)(f,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("dialog-base",{attrs:{title:t.title,visible:t.isVisible,tooltip:"COMING SOON..."},on:{"update:visible":function(e){t.isVisible=e}}},[e("div",{staticClass:"dashboard-burn"},[e("p",{staticClass:"p3 dashboard-burn__text"},[t._v("ENTER THE AMOUNT YOU WANT TO BURN")]),e("token-input",{ref:"tokenInput",staticClass:"dashboard-burn__token-input",attrs:{"with-slider":"",title:"AMOUNT","is-fiat-editable":t.editableFiat,"is-max-available":t.isMaxAvailable,token:t.asset,balance:t.balance,"slider-value":t.valuePercent,disabled:t.loading},on:{max:t.handleMaxValue,slide:t.handlePercentChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("s-button",{staticClass:"s-typography-button--large action-button dashboard-burn__button",attrs:{type:"primary",disabled:t.disabled},on:{click:t.handleBurn}},[t.isInsufficientXorForFee?[t._v(" "+t._s(t.t("insufficientBalanceText",{tokenSymbol:t.xorSymbol}))+" ")]:t.emptyValue?[t._v(" "+t._s(t.t("buttons.enterAmount"))+" ")]:t.isInsufficientBalance?[t._v(" "+t._s(t.t("insufficientBalanceText",{tokenSymbol:t.tokenSymbol}))+" ")]:[t._v(t._s(t.title))]],2),e("info-line",{attrs:{label:t.t("networkFeeText"),"label-tooltip":t.t("networkFeeTooltipText"),value:t.networkFeeFormatted,"asset-symbol":t.xorSymbol,"fiat-value":t.getFiatAmountByCodecString(t.networkFee),"is-formatted":""}})],1)])}),[],!1,null,"6e8e777e",null).exports}}]);
"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[1931],{1931:function(t,e,s){s.r(e),s.d(e,{default:function(){return y}});var i=s(23166),a=s(97582),r=s(57950),n=s(86424),o=s(89445),l=s(68282),c=s(69781),u=s(49053),p=s(30606),d=s(50961);let h=class extends((0,o.Wr)(n.tA.CopyAddressMixin,n.tA.TranslationMixin,n.tA.TransactionMixin,n.tA.LoadingMixin,n.tA.FormattedAmountMixin)){constructor(...t){super(...t),(0,i.Z)(this,"alerts",void 0),(0,i.Z)(this,"xor",void 0),(0,i.Z)(this,"whitelistIdsBySymbol",void 0),(0,i.Z)(this,"getAsset",void 0),(0,i.Z)(this,"addPriceAlert",void 0),(0,i.Z)(this,"editPriceAlert",void 0),(0,i.Z)(this,"alertToEdit",void 0),(0,i.Z)(this,"floatInput",void 0),(0,i.Z)(this,"delimiters",r.FPNumber.DELIMITERS_CONFIG),(0,i.Z)(this,"amount",""),(0,i.Z)(this,"asset",{}),(0,i.Z)(this,"autoChoice",!0),(0,i.Z)(this,"currentTypeTab",p._6.Drop),(0,i.Z)(this,"currentFrequencyTab",p.Ic.Once),(0,i.Z)(this,"AlertFrequencyTabs",p.Ic),(0,i.Z)(this,"AlertTypeTabs",p._6)}updateChoise(t){this.autoChoice&&(this.currentTypeTab=t?p._6.Drop:p._6.Raise),this.autoChoice=!0}get assetPrice(){return r.FPNumber.fromCodecValue(this.getAssetFiatPrice(this.asset)??l.m8)}get priceChange(){const t=r.FPNumber.fromNatural(this.amount),e=t.isZero()?this.assetPrice:t;return(0,d._Q)(e,this.assetPrice)}get negativeDelta(){return r.FPNumber.lt(this.priceChange,r.FPNumber.ZERO)}get deltaPercentage(){const t=this.negativeDelta?this.priceChange.negative():this.priceChange;return(0,d.iL)(t)}get placeholder(){return(0,d.iL)(this.assetPrice)}handleTabClick(){this.autoChoice=!1}get fiatAmountValue(){return this.assetPrice.toLocaleString()}get btnDisabled(){return!this.amount}get isEditMode(){return null!==this.alertToEdit}activeSignClass(t){return"+"===t&&this.negativeDelta?"delta-percent--not-active":"-"!==t||this.negativeDelta?"":"delta-percent--not-active"}handleAlertCreation(){const t=r.FPNumber.fromNatural(this.amount),e=r.FPNumber.fromNatural(this.fiatAmountValue);let s=!1;if("drop"===this.currentTypeTab?r.FPNumber.lt(e,t)&&(s=!0):"raise"===this.currentTypeTab&&r.FPNumber.gt(e,t)&&(s=!0),this.isEditMode)return this.editPriceAlert({alert:{token:this.asset.symbol,price:this.amount,type:this.currentTypeTab,once:"once"===this.currentFrequencyTab,wasNotified:s},position:this.alertToEdit.position}),void this.$emit("back");this.alerts.length>n.WALLET_CONSTS.MAX_ALERTS_NUMBER||(this.addPriceAlert({token:this.asset.symbol,price:this.amount,type:this.currentTypeTab,once:"once"===this.currentFrequencyTab,wasNotified:s}),this.$emit("back"))}openSelectAssetDialog(){this.$emit("open-select-token")}selectAsset(t){t&&(this.asset=t)}async mounted(){await this.$nextTick();const t=this.$parent?.$parent;t?.computeTop?.(),this.isEditMode?(this.amount=this.alertToEdit.price,this.currentTypeTab="drop"===this.alertToEdit.type?p._6.Drop:p._6.Raise,this.currentFrequencyTab=this.alertToEdit.once?p.Ic.Once:p.Ic.Always,this.selectAsset(this.getAsset(this.whitelistIdsBySymbol[this.alertToEdit.token]))):(this.amount="",this.currentTypeTab=p._6.Drop,this.currentFrequencyTab=p.Ic.Once,this.selectAsset(this.xor)),this.floatInput?.$children?.[0]?.focus?.(),this.$root.$on("selectAlertAsset",(t=>{this.selectAsset(t)}))}};(0,a.gn)([u.SB.wallet.settings.alerts],h.prototype,"alerts",void 0),(0,a.gn)([u.Yn.assets.xor],h.prototype,"xor",void 0),(0,a.gn)([u.Yn.wallet.account.whitelistIdsBySymbol],h.prototype,"whitelistIdsBySymbol",void 0),(0,a.gn)([u.Yn.assets.assetDataByAddress],h.prototype,"getAsset",void 0),(0,a.gn)([u.QF.wallet.settings.addPriceAlert],h.prototype,"addPriceAlert",void 0),(0,a.gn)([u.QF.wallet.settings.editPriceAlert],h.prototype,"editPriceAlert",void 0),(0,a.gn)([(0,o.fI)({default:null,type:Object})],h.prototype,"alertToEdit",void 0),(0,a.gn)([(0,o.Rl)("floatInput")],h.prototype,"floatInput",void 0),(0,a.gn)([(0,o.RL)("negativeDelta")],h.prototype,"updateChoise",null),h=(0,a.gn)([(0,o.wA)({components:{TokenLogo:n.wx.TokenLogo,FormattedAmount:n.wx.FormattedAmount,FormattedAmountWithFiatValue:n.wx.FormattedAmountWithFiatValue,TokenAddress:n.wx.TokenAddress,AlertsSelectAsset:(0,c.kF)(l.z8.SelectToken),TokenSelectButton:(0,c.kF)(l.z8.TokenSelectButton)}})],h);var m=h,b=(0,s(1001).Z)(m,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"setup-price-alert"},[e("span",{staticClass:"setup-price-alert__title"},[t._v(t._s(t.t("alerts.alertTypeTitle")))]),e("s-tooltip",{attrs:{slot:"suffix","border-radius":"mini",content:t.t("alerts.typeTooltip"),placement:"top",tabindex:"-1"},slot:"suffix"},[e("s-icon",{attrs:{name:"info-16",size:"14px"}})],1),e("s-tabs",{staticClass:"setup-price-alert__tab",attrs:{type:"rounded"},on:{click:t.handleTabClick},model:{value:t.currentTypeTab,callback:function(e){t.currentTypeTab=e},expression:"currentTypeTab"}},t._l(t.AlertTypeTabs,(function(s){return e("s-tab",{key:s,attrs:{label:t.t(`alerts.${s}`),name:s}})})),1),e("s-float-input",{ref:"floatInput",staticClass:"price-input",attrs:{size:"medium","has-locale-string":"",delimiters:t.delimiters,decimals:t.asset.decimals,placeholder:`$${t.placeholder}`,maxlength:9},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}},[t.amount?e("div",{staticClass:"price-input__prefix",attrs:{slot:"left"},slot:"left"},[t._v("$")]):t._e(),e("div",{staticClass:"price-input-inner",attrs:{slot:"top"},slot:"top"},[e("div",[t._v(t._s(`${t.asset.symbol} ${t.t("exchange.price")}`))]),e("div",{staticClass:"price-input-inner-ratio"},[e("span",{staticClass:"price-input-current-title"},[t._v(t._s(t.t("alerts.currentPrice")))]),e("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","value-class":"input-value--primary",value:"1","asset-symbol":t.asset.symbol,"fiat-value":t.fiatAmountValue}})],1)]),e("token-select-button",{attrs:{slot:"right",icon:"chevron-down-rounded-16",token:t.asset},on:{click:function(e){return e.stopPropagation(),t.openSelectAssetDialog.apply(null,arguments)}},slot:"right"}),e("div",{staticClass:"info",attrs:{slot:"bottom"},slot:"bottom"},[e("span",{staticClass:"delta-percent"},[e("span",{class:t.activeSignClass("+")},[t._v(" + ")]),e("span",{staticClass:"slash"},[t._v("/")]),e("span",{class:t.activeSignClass("-")},[t._v(" - ")]),t._v(" "+t._s(t.deltaPercentage)+"% ")]),e("token-address",t._b({},"token-address",t.asset,!1))],1)],1),e("span",{staticClass:"setup-price-alert__title"},[t._v(t._s(t.t("alerts.alertFrequencyTitle")))]),e("s-tooltip",{attrs:{slot:"suffix","border-radius":"mini",content:t.t("alerts.frequencyTooltip"),placement:"top",tabindex:"-1"},slot:"suffix"},[e("s-icon",{attrs:{name:"info-16",size:"14px"}})],1),e("s-tabs",{staticClass:"setup-price-alert__tab",attrs:{type:"rounded"},model:{value:t.currentFrequencyTab,callback:function(e){t.currentFrequencyTab=e},expression:"currentFrequencyTab"}},t._l(t.AlertFrequencyTabs,(function(s){return e("s-tab",{key:s,attrs:{label:t.t(`alerts.${s}`),name:s}})})),1),e("s-button",{staticClass:"setup-price-alert__btn s-typography-button--large",attrs:{type:"primary",loading:t.loading,disabled:t.btnDisabled},on:{click:t.handleAlertCreation}},[t._v(" "+t._s(t.t("alerts.finishBtn"))+" ")])],1)}),[],!1,null,null,null),y=b.exports}}]);
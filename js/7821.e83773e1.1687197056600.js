"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[7821],{47821:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var a=s(60760),i=s(70655),l=s(53545),o=s(8755),r=s(36930),n=s(26181),u=s(44973),d=s(52859),c=s(80710),h=s(16546),m=s(85530);let b=class extends((0,l.Wr)(n.Z,o.tA.DialogMixin,o.tA.LoadingMixin)){constructor(...e){super(...e),(0,a.Z)(this,"emission",void 0),(0,a.Z)(this,"baseAssetValue",""),(0,a.Z)(this,"poolAssetValue",""),(0,a.Z)(this,"intervals",[1,7,30,90]),(0,a.Z)(this,"interval",1),(0,a.Z)(this,"link",h.yX.demeterFarmingPlatform)}resetValue(){this.baseAssetValue="",this.poolAssetValue=""}get networkFee(){return this.networkFees[r.Operation.DemeterFarmingDepositLiquidity]}get selectedPeriod(){return String(this.interval)}get rewardsText(){return this.t("demeterFarming.rewards",{symbol:this.rewardAssetSymbol})}get baseAssetDecimals(){return this.baseAsset?.decimals??r.FPNumber.DEFAULT_PRECISION}get baseAssetBalance(){return this.baseAsset?r.FPNumber.fromCodecValue((0,m.rh)(this.baseAsset)??0,this.baseAssetDecimals):r.FPNumber.ZERO}get isBaseAssetMaxButtonAvailable(){return!!this.baseAsset&&(0,m.oI)(!0,this.baseAsset,this.baseAssetValue,this.networkFee,this.xor)}get isPoolAssetMaxButtonAvailable(){return!!this.poolAsset&&(0,m.oI)(!0,this.poolAsset,this.poolAssetValue,this.networkFee,this.xor)}get userTokensDeposit(){return this.isFarm?this.lpBalance.mul(new r.FPNumber(this.poolAssetValue||0)).div(r.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)):new r.FPNumber(this.poolAssetValue||0)}get userTokensDepositWithFee(){const e=new r.FPNumber(this.depositFee);return this.userTokensDeposit.mul(r.FPNumber.ONE.sub(e))}get calculatedRewards(){if(!this.pool)return r.FPNumber.ZERO;const e=this.pool.totalTokensInPool.add(this.userTokensDepositWithFee);if(e.isZero())return r.FPNumber.ZERO;const t=new r.FPNumber(this.interval),s=new r.FPNumber(14400),a=t.mul(s);return this.emission.mul(a).mul(this.userTokensDepositWithFee).div(e)}get calculatedRewardsFormatted(){return"~"+this.calculatedRewards.toLocaleString()}get calculatedRewardsFiat(){return this.rewardAsset?this.getFiatAmountByFPNumber(this.calculatedRewards,this.rewardAsset):null}get calculatedRoiPercent(){const e=new r.FPNumber(this.poolAssetValue||0);if(e.isZero()||this.poolAssetPrice.isZero())return r.FPNumber.ZERO;const t=this.isFarm?2:1,s=e.mul(new r.FPNumber(t)).mul(this.poolAssetPrice),a=s.mul(new r.FPNumber(this.depositFee)),i=r.FPNumber.fromCodecValue(this.networkFee).mul(r.FPNumber.fromCodecValue(this.getAssetFiatPrice(this.xor)??0)),l=a.add(i);return this.calculatedRewards.mul(this.rewardAssetPrice).sub(l).div(s).mul(r.FPNumber.HUNDRED)}get calculatedRoiPercentFormatted(){return(0,m.Gc)(this.calculatedRoiPercent,!0)}selectPeriod(e){this.interval=Number(e)}handleBaseAssetValue(e){this.baseAssetValue=e,e?this.liquidity&&(this.poolAssetValue=new r.FPNumber(this.baseAssetValue).mul(r.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)).div(r.FPNumber.fromCodecValue(this.liquidity?.firstBalance??0)).toString()):this.poolAssetValue=""}handlePoolAssetValue(e){this.poolAssetValue=e,e?this.liquidity&&(this.baseAssetValue=new r.FPNumber(this.poolAssetValue).mul(r.FPNumber.fromCodecValue(this.liquidity?.firstBalance??0)).div(r.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)).toString()):this.baseAssetValue=""}handleBaseAssetMax(){this.baseAsset&&this.handleBaseAssetValue((0,m.MN)(this.baseAsset,this.networkFee))}handlePoolAssetMax(){this.poolAsset&&this.handlePoolAssetValue((0,m.MN)(this.poolAsset,this.networkFee))}};(0,i.__decorate)([(0,l.fI)({default:()=>r.FPNumber.ZERO,type:Object})],b.prototype,"emission",void 0),(0,i.__decorate)([(0,l.RL)("visible")],b.prototype,"resetValue",null),b=(0,i.__decorate)([(0,l.wA)({components:{DialogTitle:(0,u.w)(d.J.DialogTitle),TokenInput:(0,c.kF)(h.z8.TokenInput),DialogBase:o.wx.DialogBase,InfoLine:o.wx.InfoLine}})],b);var A=b,p=(0,s(1001).Z)(A,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("dialog-base",{attrs:{visible:e.isVisible,title:e.TranslationConsts.APR+" "+e.t("demeterFarming.calculator")},on:{"update:visible":function(t){e.isVisible=t}}},[s("div",{staticClass:"calculator-dialog"},[s("dialog-title",{attrs:{"base-asset":e.baseAsset,"pool-asset":e.poolAsset,"is-farm":e.isFarm}}),s("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[e.isFarm&&e.baseAsset?[s("token-input",{attrs:{balance:e.baseAssetBalance.toCodecString(),"is-max-available":e.isBaseAssetMaxButtonAvailable,title:e.t("demeterFarming.amountAdd"),token:e.baseAsset,value:e.baseAssetValue},on:{input:e.handleBaseAssetValue,max:e.handleBaseAssetMax}}),e.poolAsset?s("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}):e._e()]:e._e(),e.poolAsset?s("token-input",{attrs:{balance:e.poolAssetBalance.toCodecString(),"is-max-available":e.isPoolAssetMaxButtonAvailable,title:e.t("demeterFarming.amountAdd"),token:e.poolAsset,value:e.poolAssetValue},on:{input:e.handlePoolAssetValue,max:e.handlePoolAssetMax}}):e._e()],2),s("div",{staticClass:"duration"},[s("info-line",{staticClass:"duration-title",attrs:{label:"Duration"}}),s("s-tabs",{staticClass:"duration-tabs",attrs:{type:"rounded",value:e.selectedPeriod},on:{input:e.selectPeriod}},e._l(e.intervals,(function(e){return s("s-tab",{key:e,attrs:{name:String(e),label:e+"D"}})})),1)],1),s("div",{staticClass:"results"},[s("div",{staticClass:"results-title"},[e._v(e._s(e.TranslationConsts.APR)+" "+e._s(e.t("demeterFarming.results")))]),s("info-line",{attrs:{label:e.TranslationConsts.ROI,"label-tooltip":e.t("tooltips.roi"),value:e.calculatedRoiPercentFormatted}}),s("info-line",{attrs:{label:e.rewardsText,value:e.calculatedRewardsFormatted,"fiat-value":e.calculatedRewardsFiat}})],1),s("a",{staticClass:"demeter-copyright",attrs:{href:e.link,target:"_blank",rel:"nofollow noopener"}},[e._v(" "+e._s(e.t("demeterFarming.poweredBy"))+" ")])],1)])}),[],!1,null,"aea2ff06",null).exports}}]);
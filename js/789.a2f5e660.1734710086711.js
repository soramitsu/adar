"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[789],{10789:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var s=i(23166),n=(i(70560),i(97582)),a=i(69826),r=i(95212),o=i(86424),l=i(89445),h=i(14930),c=i(16200),d=i(25013),u=i(68282),x=i(69781),g=i(49053),m=i(50961),k=i(79961),p=i(73487);let v=class extends((0,l.Wr)(o.tA.FormattedAmountMixin,o.tA.CopyAddressMixin,h.Z,c.Z,d.Z)){constructor(...t){super(...t),(0,s.Z)(this,"KnownSymbols",a.KnownSymbols),(0,s.Z)(this,"externalBlockNumber",void 0),(0,s.Z)(this,"waitingForApprove",void 0),(0,s.Z)(this,"inProgressIds",void 0),(0,s.Z)(this,"prevRoute",void 0),(0,s.Z)(this,"historyItem",void 0),(0,s.Z)(this,"externalAccount",void 0),(0,s.Z)(this,"removeHistory",void 0),(0,s.Z)(this,"handleBridgeTransaction",void 0),(0,s.Z)(this,"setHistoryId",void 0)}get tx(){return this.historyItem}get txIsUnsigned(){return!!this.historyItem?.id&&(0,k.bM)(this.historyItem)}get txInProcess(){return!!this.historyItem?.id&&this.historyItem.id in this.inProgressIds}get txWaitingForApprove(){return!!this.historyItem?.id&&this.historyItem.id in this.waitingForApprove}get amount(){return this.historyItem?.amount??""}get amountReceived(){return this.historyItem?.amount2??this.amount}get amountFiatValue(){return this.asset?this.getFiatAmountByString(this.amount,this.asset):null}get amountReceivedFiatValue(){return this.asset?this.getFiatAmountByString(this.amountReceived,this.asset):null}get formattedAmount(){return this.amount&&this.asset?this.formatStringValue(this.amount,this.asset.decimals):""}get formattedAmountReceived(){return this.amountReceived&&this.asset?this.formatStringValue(this.amountReceived,this.asset.decimals):""}get assetSymbol(){return this.asset?.symbol??""}get parachainNetworkId(){try{return p.Z.getSoraParachain(this.externalNetworkId)}catch{return null}}get txSoraNetworkFee(){return this.historyItem?.soraNetworkFee??this.soraNetworkFee}get txSoraNetworkFeeFormatted(){return this.formatCodecNumber(this.txSoraNetworkFee,this.xor?.decimals)}get txSoraNetworkFeeFiatValue(){return this.getFiatAmountByCodecString(this.txSoraNetworkFee)}get txExternalNetworkFee(){return this.historyItem?.externalNetworkFee??this.externalNetworkFee}get txExternalNetworkFeeFormatted(){return this.formatCodecNumber(this.txExternalNetworkFee,this.nativeTokenDecimals)}get txExternalNetworkFeeApproximation(){return this.txExternalNetworkFeeFormatted!==u.m8&&!this.historyItem?.externalNetworkFee}get txExternalNetworkFeeFiatValue(){return this.nativeToken?this.getFiatAmountByCodecString(this.txExternalNetworkFee,this.nativeToken):null}get txExternalTransferFee(){return this.historyItem?.externalTransferFee??u.m8}get txExternalTransferFeeFormatted(){return this.formatCodecNumber(this.txExternalTransferFee,this.asset?.externalDecimals)}get txExternalTransferFeeNotZero(){return this.txExternalTransferFee!==u.m8}get txExternalTransferFeeFiatValue(){return this.asset?this.getFiatAmountByCodecString(this.txExternalTransferFee,this.asset):null}get txParachainBlockId(){return this.historyItem?.parachainBlockId??""}get txParachainBlockNumber(){return this.historyItem?.parachainBlockHeight}get txDate(){return this.formatDatetime(this.historyItem)}get txState(){return this.historyItem?.transactionState??r.BridgeTxStatus.Pending}get isTxFailed(){return this.isFailedState(this.historyItem)}get isTxCompleted(){return this.isSuccessState(this.historyItem)}get isTxWaiting(){return this.isWaitingForAction(this.historyItem)}get isTxPending(){return!this.isTxFailed&&!this.isTxCompleted}get txIsFinilized(){return!this.isTxPending&&!this.isTxWaiting&&!this.txIsUnsigned}get headerIconClasses(){const t="header-icon",e=[t];return this.isTxWaiting?e.push(`${t}--wait`):this.isTxFailed?e.push(`${t}--error`):this.isTxCompleted?e.push(`${t}--success`):e.push(`${t}--wait`),e.join(" ")}get transactionStatus(){return this.txIsUnsigned||this.isTxWaiting?this.t("bridgeTransaction.statuses.waitingForConfirmation"):this.isTxFailed?this.t("bridgeTransaction.statuses.failed"):this.isTxCompleted?this.t("bridgeTransaction.statuses.done"):this.t("bridgeTransaction.statuses.pending")+"..."}get isGreaterThanMaxAmount(){return this.txIsUnsigned&&this.isGreaterThanTransferMaxAmount(this.amount,this.asset,this.isOutgoing)}get isLowerThanMinAmount(){return this.txIsUnsigned&&this.isLowerThanTransferMinAmount(this.amount,this.asset,this.isOutgoing)}get isInsufficientBalance(){const t=this.isOutgoing?this.txSoraNetworkFee:this.txExternalNetworkFee;return!!(this.asset&&this.amount&&t)&&(this.txIsUnsigned&&(0,m.Vl)(this.asset,this.amount,t,{isExternalBalance:!this.isOutgoing,isExternalNative:this.isNativeTokenSelected}))}get isInsufficientXorForFee(){return this.txIsUnsigned&&(0,m.LG)(this.xor,this.txSoraNetworkFee)}get isInsufficientEvmNativeTokenForFee(){return(this.txIsUnsigned&&!this.isOutgoing||!this.txIsUnsigned&&this.isOutgoing)&&(0,m.lm)(this.externalNativeBalance,this.txExternalNetworkFee)}get isAnotherEvmAddress(){return!!this.isEvmTxType&&this.txExternalAccount.toLowerCase()!==this.externalAccount.toLowerCase()}get confirmationButtonDisabled(){return!(this.isOutgoing||this.isValidNetwork)||this.isAnotherEvmAddress||this.isInsufficientBalance||this.isGreaterThanMaxAmount||this.isLowerThanMinAmount||this.isInsufficientXorForFee||this.isInsufficientEvmNativeTokenForFee||this.isTxPending}get externalNetworkName(){return this.externalNetworkType&&this.externalNetworkId?this.getNetworkName(this.externalNetworkType,this.externalNetworkId):""}get parachainExplorerLinks(){return this.externalNetworkType&&this.parachainNetworkId?this.getNetworkExplorerLinks(this.externalNetworkType,this.parachainNetworkId,"",this.txParachainBlockNumber):[]}async created(){this.historyItem?await this.withParentLoading((async()=>{const t=!this.txInProcess&&this.isTxPending;await this.handleTransaction(t)})):this.navigateToBridge()}beforeDestroy(){if(!this.txInProcess&&this.txIsUnsigned){const t={...this.historyItem};this.removeHistory({tx:t,force:!0})}this.setHistoryId()}get confirmationBlocksLeft(){if(!this.isEvmTxType||this.isOutgoing||!this.txExternalBlockNumber||!this.externalBlockNumber)return 0;const t=this.txExternalBlockNumber+30-this.externalBlockNumber;return Math.max(t,0)}get failedClass(){return this.isTxFailed&&!this.isTxWaiting?"info-line--error":""}async handleTransaction(t=!0){t&&this.historyItem?.id&&await this.handleBridgeTransaction(this.historyItem.id)}handleBack(){x.ZP.push({name:this.prevRoute})}get txInternalHash(){return this.isOutgoing?this.txSoraHash||this.txInternalBlockId||this.txSoraId:this.txSoraHash}get accountLinks(){const t=this.t("accountAddressText"),e=this.getLinkData(this.txInternalAccount,this.internalAccountLinks,t),i=this.getLinkData(this.txExternalAccount,this.externalAccountLinks,t,this.externalNetworkId);return this.sortLinksByTxDirection([e,i])}get transactionLinks(){const t=this.t("bridgeTransaction.transactionHash"),e=this.t("transaction.blockId"),i=this.getLinkData(this.txInternalHash,this.internalExplorerLinks,t),s=this.getLinkData(this.txParachainBlockId,this.parachainExplorerLinks,e,this.parachainNetworkId),n=this.getLinkData(this.txExternalHash??this.txExternalBlockId,this.externalExplorerLinks,this.txExternalHash?t:e,this.externalNetworkId);return this.sortLinksByTxDirection([i,s,n])}sortLinksByTxDirection(t){const e=t.filter((t=>!!t));return this.isOutgoing?e:[...e].reverse()}getLinkData(t,e,i,s){if(!t)return null;const n=this.getNetworkText(i,s);return{value:t,formatted:this.formatAddress(t,24),placeholder:n,tooltip:this.copyTooltip(n),links:e}}};(0,n.gn)([g.SB.bridge.externalBlockNumber],v.prototype,"externalBlockNumber",void 0),(0,n.gn)([g.SB.bridge.waitingForApprove],v.prototype,"waitingForApprove",void 0),(0,n.gn)([g.SB.bridge.inProgressIds],v.prototype,"inProgressIds",void 0),(0,n.gn)([g.SB.router.prev],v.prototype,"prevRoute",void 0),(0,n.gn)([g.Yn.bridge.historyItem],v.prototype,"historyItem",void 0),(0,n.gn)([g.Yn.bridge.externalAccount],v.prototype,"externalAccount",void 0),(0,n.gn)([g.aD.bridge.removeHistory],v.prototype,"removeHistory",void 0),(0,n.gn)([g.aD.bridge.handleBridgeTransaction],v.prototype,"handleBridgeTransaction",void 0),(0,n.gn)([g.QF.bridge.setHistoryId],v.prototype,"setHistoryId",void 0),v=(0,n.gn)([(0,l.wA)({components:{GenericPageHeader:(0,x.kF)(u.z8.GenericPageHeader),ConfirmBridgeTransactionDialog:(0,x.kF)(u.z8.ConfirmBridgeTransactionDialog),LinksDropdown:(0,x.kF)(u.z8.LinksDropdown),FormattedAmount:o.wx.FormattedAmount,InfoLine:o.wx.InfoLine}})],v);var y=v,f=(0,i(1001).Z)(y,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"container transaction-container"},[e("generic-page-header",{attrs:{"has-button-back":"",title:t.t("bridgeTransaction.title")},on:{back:t.handleBack}},[e("s-button",{staticClass:"el-button--history",attrs:{type:"action",icon:"time-time-history-24",tooltip:t.t("bridgeHistory.showHistory"),"tooltip-placement":"bottom-end"},on:{click:t.handleViewTransactionsHistory}})],1),e("div",{staticClass:"transaction-content"},[e("div",{staticClass:"header"},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isTxPending,expression:"isTxPending"}],class:t.headerIconClasses}),e("h5",{staticClass:"header-details"},[e("formatted-amount",{staticClass:"info-line-value",attrs:{"value-can-be-hidden":"",value:t.formattedAmount,"asset-symbol":t.assetSymbol}},[e("i",{class:`network-icon network-icon--${t.getNetworkIcon(t.isOutgoing?0:t.externalNetworkId)}`})]),e("span",{staticClass:"header-details-separator"},[t._v(t._s(t.t("bridgeTransaction.for")))]),e("formatted-amount",{staticClass:"info-line-value",attrs:{"value-can-be-hidden":"",value:t.formattedAmountReceived,"asset-symbol":t.assetSymbol}},[e("i",{class:`network-icon network-icon--${t.getNetworkIcon(t.isOutgoing?t.externalNetworkId:0)}`})])],1)]),t._l(t.accountLinks,(function({value:i,formatted:s,placeholder:n,tooltip:a,links:r}){return e("div",{key:i,staticClass:"transaction-hash-container transaction-hash-container--with-dropdown"},[e("s-input",{attrs:{placeholder:n,value:s,readonly:""}}),e("s-button",{staticClass:"s-button--hash-copy",attrs:{type:"action",alternative:"",icon:"basic-copy-24",tooltip:a},on:{click:function(e){return t.handleCopyAddress(i,e)}}}),r.length?e("links-dropdown",{attrs:{links:r}}):t._e()],1)})),e("info-line",{class:t.failedClass,attrs:{label:t.t("bridgeTransaction.networkInfo.status"),value:t.transactionStatus}}),e("info-line",{attrs:{label:t.t("bridgeTransaction.networkInfo.date"),value:t.txDate}}),t.amount?e("info-line",{attrs:{"is-formatted":"","value-can-be-hidden":"",label:t.t("bridgeTransaction.networkInfo.amount"),value:t.formattedAmount,"asset-symbol":t.assetSymbol,"fiat-value":t.amountFiatValue}}):t._e(),t.amountReceived?e("info-line",{attrs:{"is-formatted":"","value-can-be-hidden":"",label:t.t("receivedText"),value:t.formattedAmountReceived,"asset-symbol":t.assetSymbol,"fiat-value":t.amountReceivedFiatValue}}):t._e(),e("info-line",{attrs:{"is-formatted":"",label:t.getNetworkText(t.t("bridgeTransaction.networkInfo.transactionFee")),value:t.txSoraNetworkFeeFormatted,"asset-symbol":t.KnownSymbols.XOR,"fiat-value":t.txSoraNetworkFeeFiatValue}}),e("info-line",{attrs:{"is-formatted":"",label:t.getNetworkText(t.t("bridgeTransaction.networkInfo.transactionFee"),t.externalNetworkId,t.txExternalNetworkFeeApproximation),value:t.txExternalNetworkFeeFormatted,"asset-symbol":t.nativeTokenSymbol,"fiat-value":t.txExternalNetworkFeeFiatValue}}),t.txExternalTransferFeeNotZero?e("info-line",{attrs:{"is-formatted":"",label:t.t("bridge.externalTransferFee",{network:t.externalNetworkName}),value:t.txExternalTransferFeeFormatted,"asset-symbol":t.assetSymbol,"fiat-value":t.txExternalTransferFeeFiatValue}}):t._e(),t._l(t.transactionLinks,(function({value:i,formatted:s,placeholder:n,tooltip:a,links:r}){return e("div",{key:i,staticClass:"transaction-hash-container transaction-hash-container--with-dropdown"},[e("s-input",{attrs:{placeholder:n,value:s,readonly:""}}),e("s-button",{staticClass:"s-button--hash-copy",attrs:{type:"action",alternative:"",icon:"basic-copy-24",tooltip:a},on:{click:function(e){return t.handleCopyAddress(i,e)}}}),r.length?e("links-dropdown",{attrs:{links:r}}):t._e()],1)})),t.txIsFinilized?t._e():e("s-button",{staticClass:"s-typograhy-button--big",attrs:{type:"primary",disabled:t.confirmationButtonDisabled},on:{click:t.handleTransaction}},[t.confirmationBlocksLeft?[t._v(" "+t._s(t.t("bridgeTransaction.blocksLeft",{count:t.confirmationBlocksLeft}))+" ")]:t.txWaitingForApprove?[t._v(t._s(t.t("bridgeTransaction.allowToken",{tokenSymbol:t.assetSymbol})))]:t.isTxPending?[t._v(t._s(t.t("bridgeTransaction.pending")))]:t.isAnotherEvmAddress?[t._v(t._s(t.t("changeAccountText")))]:t.isOutgoing||t.isValidNetwork?t.isInsufficientBalance?[t._v(t._s(t.t("insufficientBalanceText",{tokenSymbol:t.assetSymbol})))]:t.isInsufficientXorForFee?[t._v(t._s(t.t("insufficientBalanceText",{tokenSymbol:t.KnownSymbols.XOR})))]:t.isInsufficientEvmNativeTokenForFee?[t._v(t._s(t.t("insufficientBalanceText",{tokenSymbol:t.nativeTokenSymbol})))]:t.isGreaterThanMaxAmount?[t._v(" "+t._s(t.t("exceededAmountText",{amount:t.t("maxAmountText")}))+" ")]:t.isLowerThanMinAmount?[t._v(" "+t._s(t.t("exceededAmountText",{amount:t.t("minAmountText")}))+" ")]:t.isTxWaiting?[t._v(t._s(t.t("confirmTransactionText")))]:t.isTxFailed&&t.txIsUnsigned?[t._v(t._s(t.t("retryText")))]:t._e():[t._v(t._s(t.t("changeNetworkText")))]],2),t.txWaitingForApprove?e("div",{staticClass:"transaction-approval-text"},[t._v(" "+t._s(t.t("bridgeTransaction.approveToken"))+" ")]):t._e()],2),t.txIsFinilized?e("s-button",{staticClass:"s-typography-button--large",attrs:{type:"secondary"},on:{click:t.navigateToBridge}},[t._v(" "+t._s(t.t("bridgeTransaction.newTransaction"))+" ")]):t._e()],1)}),[],!1,null,"d434b6bc",null).exports}}]);
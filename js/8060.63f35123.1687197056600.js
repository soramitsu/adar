"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[8060],{48060:function(e,t,o){o.r(t),o.d(t,{default:function(){return D}});var a=o(60760),n=o(70655),s=o(53545),i=o(80710),d=o(16546);const r="(?::([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5]))",l="\\/[a-z0-9-_]+",c="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)",u=`${c}(?:\\.${c}){3}`,p=e=>`^${e}$`,h=new RegExp(`^${"wss?:\\/\\/"}`);const g=new RegExp(p(`(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)*[a-z0-9][a-z0-9-]{0,61}[a-z0-9]${r}?(${l})*/?`)),f=new RegExp(p(`${u}${r}?(${l})*/?`));var m=o(63390),b=o(64645),v=o(32806),y=o(25108);let _=class extends((0,s.Wr)(v.Z)){constructor(...e){var t;super(...e),(0,a.Z)(this,"handleBack",void 0),(0,a.Z)(this,"handleNode",void 0),(0,a.Z)(this,"removeNode",void 0),(0,a.Z)(this,"node",void 0),(0,a.Z)(this,"existing",void 0),(0,a.Z)(this,"loading",void 0),(0,a.Z)(this,"removable",void 0),(0,a.Z)(this,"connected",void 0),(0,a.Z)(this,"tutorialLink",d.yX.nodes.tutorial),(0,a.Z)(this,"validationRules",{name:[{required:!0,message:this.t("selectNodeDialog.messages.emptyName"),trigger:"blur"}],address:[{validator:(t=this.t,(e,o,a)=>{if(!o)return a(new Error(t("selectNodeDialog.messages.emptyAddress")));if(!h.test(o))return a(new Error(t("selectNodeDialog.messages.incorrectProtocol")));const n=o.replace(h,"");if(!g.test(n)&&!f.test(n))return a(new Error(t("selectNodeDialog.messages.incorrectAddress")));a()}),trigger:"blur"}]}),(0,a.Z)(this,"nodeModel",{...m.X})}created(){this.nodeModel=Object.keys(m.X).reduce(((e,t)=>({...e,[t]:this.node[t]??m.X[t]})),{})}get formattedLocation(){return this.existing&&this.node?.location?(0,b.T)(this.node.location):null}get inputDisabled(){return this.existing&&!this.removable}get buttonText(){return this.existing?this.nodeDataChanged?this.t("selectNodeDialog.updateNode"):this.connected?this.t("selectNodeDialog.connected"):this.t("selectNodeDialog.select"):this.t("selectNodeDialog.addNode")}get buttonDisabled(){return this.connected&&!this.nodeDataChanged}get buttonType(){return this.nodeDataChanged||!this.existing?"primary":"tertiary"}get title(){const e=this.t("selectNodeDialog.customNode");return this.existing?this.node.title??e:e}get nodeDataChanged(){return this.nodeModel.name!==this.node.name||this.nodeModel.address!==this.node.address}changeNodeAddress(e){this.nodeModel.address=e.trim().toLowerCase()}async submitForm(){try{await this.$refs.nodeForm.validate();const t={...this.nodeModel,address:(e=this.nodeModel.address,"/"===e.charAt(e.length-1)?e.slice(0,-1):e)};this.handleNode(t,!this.existing||this.nodeDataChanged)}catch(e){y.warn(e)}var e}};(0,n.__decorate)([(0,s.fI)({default:()=>{},type:Function})],_.prototype,"handleBack",void 0),(0,n.__decorate)([(0,s.fI)({default:()=>{},type:Function})],_.prototype,"handleNode",void 0),(0,n.__decorate)([(0,s.fI)({default:()=>{},type:Function})],_.prototype,"removeNode",void 0),(0,n.__decorate)([(0,s.fI)({default:()=>({}),type:Object})],_.prototype,"node",void 0),(0,n.__decorate)([(0,s.fI)({default:!1,type:Boolean})],_.prototype,"existing",void 0),(0,n.__decorate)([(0,s.fI)({default:!1,type:Boolean})],_.prototype,"loading",void 0),(0,n.__decorate)([(0,s.fI)({default:!1,type:Boolean})],_.prototype,"removable",void 0),(0,n.__decorate)([(0,s.fI)({default:!1,type:Boolean})],_.prototype,"connected",void 0),_=(0,n.__decorate)([(0,s.wA)({components:{GenericPageHeader:(0,i.kF)(d.z8.GenericPageHeader)}})],_);var x=_,N=(0,o(1001).Z)(x,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("s-form",{ref:"nodeForm",staticClass:"node-info s-flex",attrs:{model:e.nodeModel,rules:e.validationRules},nativeOn:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[o("generic-page-header",{attrs:{"has-button-back":"",title:e.title},on:{back:function(t){return t.stopPropagation(),e.handleBack.apply(null,arguments)}}},[e.existing&&e.removable?[o("s-button",{attrs:{type:"action",icon:"basic-trash-24"},on:{click:function(t){return e.removeNode(e.nodeModel)}}})]:e._e()],2),o("s-form-item",{attrs:{prop:"name"}},[o("s-input",{staticClass:"node-info-input s-typography-input-field",attrs:{placeholder:e.t("nameText"),maxlength:128,disabled:e.inputDisabled},model:{value:e.nodeModel.name,callback:function(t){e.$set(e.nodeModel,"name",t)},expression:"nodeModel.name"}})],1),o("s-form-item",{attrs:{prop:"address"}},[o("s-input",{staticClass:"node-info-input s-typography-input-field",attrs:{placeholder:e.t("addressText"),disabled:e.inputDisabled},on:{change:e.changeNodeAddress},model:{value:e.nodeModel.address,callback:function(t){e.$set(e.nodeModel,"address",t)},expression:"nodeModel.address"}})],1),e.formattedLocation?o("s-form-item",{attrs:{prop:"location"}},[o("div",{staticClass:"node-info-input location-input s-typography-input-field"},[o("span",{staticClass:"location-input__placeholder"},[e._v(e._s(e.t("locationText")))]),o("span",{staticClass:"location-input__value"},[e._v(" "+e._s(e.formattedLocation.name)+" "),o("span",{staticClass:"flag-emodji"},[e._v(e._s(e.formattedLocation.flag))])])])]):e._e(),o("s-button",{staticClass:"node-info-button s-typography-button--large",attrs:{"native-type":"submit",type:e.buttonType,disabled:e.buttonDisabled,loading:e.loading}},[e._v(" "+e._s(e.buttonText)+" ")]),o("a",{staticClass:"node-info-button",attrs:{href:e.tutorialLink,tabindex:"-1",target:"_blank",rel:"noreferrer noopener"}},[o("s-button",{staticClass:"node-info-tutorial-button s-typography-button--big",attrs:{type:"tertiary",icon:"question-circle-16","icon-position":"right"}},[e._v(" "+e._s(e.t("selectNodeDialog.howToSetupOwnNode"))+" ")])],1)],1)}),[],!1,null,"cfd2cac6",null),D=N.exports}}]);
"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[8541],{58541:function(t,s,e){e.r(s),e.d(s,{default:function(){return f}});var a,i=e(23166),r=(e(70560),e(97582)),o=e(86424),n=e(89445),d=e(68282),l=e(69781),c=e(19316),m=e(93838),u=e(50149),h=e(82002);function C(t,s,e,a){return{[t]:!0,[`${t}--active`]:s===e||s===a,[`${t}--asc`]:s===e,[`${t}--desc`]:s===a}}!function(t){t.COMMISSION_ASC="commission-asc",t.COMMISSION_DESC="commission-desc",t.RETURN_ASC="return-asc",t.RETURN_DESC="return-desc"}(a||(a={}));let S=class extends((0,n.Wr)(u.Z,h.Z,o.tA.LoadingMixin)){constructor(...t){super(...t),(0,i.Z)(this,"mode",void 0),(0,i.Z)(this,"ValidatorsListMode",m.Ql),(0,i.Z)(this,"search",""),(0,i.Z)(this,"sort",a.RETURN_DESC)}get isValidatorModeRecommended(){return this.mode===m.Ql.RECOMMENDED}get sortedValidators(){return[...this.validators].sort(((t,s)=>{switch(this.sort){case a.COMMISSION_ASC:return Number(t.commission)-Number(s.commission);case a.COMMISSION_DESC:return Number(s.commission)-Number(t.commission);case a.RETURN_ASC:return Number(t.apy)-Number(s.apy);case a.RETURN_DESC:return Number(s.apy)-Number(t.apy);default:throw new Error("Invalid sort type")}}))}get filteredValidators(){const t=this.filterValidators(this.sortedValidators,this.validatorsFilter,this.search);switch(this.mode){case m.Ql.RECOMMENDED:return this.filterValidators(this.sortedValidators,m.Mq,"").slice(0,this.maxNominations);case m.Ql.USER:return t.filter((t=>this.stakingInfo?.myValidators.includes(t.address)));default:return t}}get emptyText(){return this.mode===m.Ql.USER&&0===this.stakingInfo?.myValidators.length?this.t("soraStaking.validatorsList.noNominatedValidators"):this.t("soraStaking.validatorsList.noValidators")}get commissionHeaderClass(){return C("table-header-commission",this.sort,a.COMMISSION_ASC,a.COMMISSION_DESC)}get returnHeaderClass(){return C("table-header-return",this.sort,a.RETURN_ASC,a.RETURN_DESC)}get commissionClass(){return C("info-commission",this.sort,a.COMMISSION_ASC,a.COMMISSION_DESC)}get returnClass(){return C("info-return",this.sort,a.RETURN_ASC,a.RETURN_DESC)}filterValidators(t,s,e=""){return t.filter((a=>{if(s.hasIdentity&&(!a.identity||!Object.keys(a.identity.info).length))return!1;if(s.notSlashed&&a.blocked)return!1;if(s.notOversubscribed&&a.isOversubscribed)return!1;if(s.twoValidatorsPerIdentity&&a.isOversubscribed){if(t.filter((t=>t.identity?.info.display===a.identity?.info.display)).length>2)return!1}return this.decodeName(a).toLowerCase().includes(e.toLowerCase())}))}setCommissionSort(){switch(this.sort){case a.COMMISSION_ASC:this.sort=a.COMMISSION_DESC;break;case a.COMMISSION_DESC:default:this.sort=a.COMMISSION_ASC}}setReturnSort(){switch(this.sort){case a.RETURN_ASC:this.sort=a.RETURN_DESC;break;case a.RETURN_DESC:default:this.sort=a.RETURN_ASC}}toggleSelectValidator(t){if(this.isValidatorModeRecommended)return;const s=this.selectedValidators.findIndex((s=>s.address===t.address)),e=[...this.selectedValidators];s>-1?e.splice(s,1):e.push(t),this.$emit("update:selected",e)}isSelected(t){return this.selectedValidators.some((s=>s.address===t.address))}getValidatorAvatar(t){return t.identity?.info.image?t.identity?.info.image:"/staking/validator-avatar.svg"}onValidatorsChange(){this.$emit("update:selected",this.isValidatorModeRecommended?this.filteredValidators:[])}openFilters(){this.setShowValidatorsFilterDialog(!0)}created(){this.setValidatorsFilter(m.mE)}};(0,r.gn)([(0,n.fI)({required:!0,type:String})],S.prototype,"mode",void 0),(0,r.gn)([(0,n.RL)("validators",{immediate:!0})],S.prototype,"onValidatorsChange",null),S=(0,r.gn)([(0,n.wA)({components:{TokenInput:(0,l.kF)(d.z8.TokenInput),InfoLine:o.wx.InfoLine,FormattedAddress:o.wx.FormattedAddress,StakingHeader:(0,c.qU)(m.Jh.StakingHeader),ValidatorAvatar:(0,c.qU)(m.Jh.ValidatorAvatar)}})],S);var v=S,f=(0,e(1001).Z)(v,(function(){var t=this,s=t._self._c;t._self._setupProxy;return s("div",{staticClass:"validators"},[t.isValidatorModeRecommended?t._e():s("div",{staticClass:"search-container"},[s("s-input",{attrs:{type:"text",placeholder:t.t("soraStaking.validatorsList.search"),prefix:"s-icon-basic-search-24"},scopedSlots:t._u([{key:"right",fn:function(){return[s("s-button",{staticClass:"filters-button",attrs:{type:"outline",size:"mini"},on:{click:t.openFilters}},[s("div",{staticClass:"filters-button-content"},[s("span",[t._v(t._s(t.t("soraStaking.validatorsFilterDialog.title")))]),s("s-icon",{attrs:{name:"basic-settings-24",size:"14px"}})],1)])]},proxy:!0}],null,!1,3445169883),model:{value:t.search,callback:function(s){t.search=s},expression:"search"}})],1),s("div",{staticClass:"table-header"},[s("div",{staticClass:"table-header-avatar table-header-item"},[s("s-icon",{attrs:{name:"various-bone-24",size:"14px"}})],1),s("div",{staticClass:"table-header-name table-header-item"},[t._v(t._s(t.t("soraStaking.validatorsList.name")))]),s("div",{staticClass:"table-header-info table-header-item"},[s("div",{directives:[{name:"button",rawName:"v-button"}],class:t.commissionHeaderClass,on:{click:t.setCommissionSort}},[s("span",[t._v(t._s(t.t("soraStaking.validatorsList.commission")))]),s("s-tooltip",{attrs:{"border-radius":"mini",content:t.t("soraStaking.validatorsList.commissionTooltip")}},[s("s-icon",{attrs:{name:"info-16",size:"14px"}})],1),s("s-icon",{staticClass:"chevron",attrs:{name:"arrows-chevron-top-rounded-24",size:"18"}})],1),s("div",{directives:[{name:"button",rawName:"v-button"}],class:t.returnHeaderClass,on:{click:t.setReturnSort}},[s("span",[t._v(t._s(t.t("soraStaking.validatorsList.return")))]),s("s-tooltip",{attrs:{"border-radius":"mini",content:t.t("comingSoonText")}},[s("s-icon",{attrs:{name:"info-16",size:"14px"}})],1),s("s-icon",{staticClass:"chevron",attrs:{name:"arrows-chevron-top-rounded-24",size:"18"}})],1)])]),s("div",{staticClass:"list"},[t.filteredValidators.length?s("s-scrollbar",{staticClass:"validators-list-scrollbar"},[s("ul",{staticClass:"list"},t._l(t.filteredValidators,(function(e){return s("li",{key:e.address,staticClass:"validator"},[s("validator-avatar",{staticClass:"avatar",attrs:{validator:e}},[t.isSelected(e)?s("div",{staticClass:"check",attrs:{slot:"icon"},slot:"icon"},[s("s-icon",{attrs:{name:"basic-check-mark-24",size:"12px"}})],1):t._e()]),s("div",{staticClass:"name-and-address"},[s("div",{staticClass:"name"},[t._v(" "+t._s(t.formatName(e))+" ")]),s("formatted-address",{attrs:{value:e.address,symbols:16}})],1),s("div",{staticClass:"info"},[s("span",{class:t.commissionClass},[t._v(t._s(t.formatCommission(e.commission))+"%")]),s("br"),s("span",{class:t.returnClass},[t._v(t._s(t.formatReturn(e.apy))+"%")])]),t.mode===t.ValidatorsListMode.SELECT?s("div",{directives:[{name:"button",rawName:"v-button"}],staticClass:"select-area",on:{click:function(s){return t.toggleSelectValidator(e)}}}):t._e()],1)})),0)]):s("div",{staticClass:"empty"},[s("span",[t._v(t._s(t.emptyText))])])],1),s("div",{staticClass:"blackout"})])}),[],!1,null,"139b807c",null).exports}}]);
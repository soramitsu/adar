"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[5665],{35665:function(s,t,e){e.r(t),e.d(t,{default:function(){return w}});var i,a=e(23166),o=e(97582),n=e(69826),l=e(86424),d=e(52612),c=e.n(d),h=e(89445),r=e(42883),u=e(89334),A=e(68282),y=e(69781),p=e(49053),v=e(11628);function g(s,t){return s.reduce(((s,e)=>(!l.hi.assets.isWhitelist(e,t)&&e.decimals&&(s[e.address]=e),s)),{})}!function(s){s.Assets="assets",s.Custom="custom"}(i||(i={}));let m=class extends((0,h.Wr)(u.Z,r.Z,l.tA.LoadingMixin)){constructor(...s){super(...s),(0,a.Z)(this,"tokenTabs",[i.Assets,i.Custom]),(0,a.Z)(this,"tabValue",c()(this.tokenTabs)),(0,a.Z)(this,"isSynthsOnly",!1),(0,a.Z)(this,"connected",void 0),(0,a.Z)(this,"asset",void 0),(0,a.Z)(this,"disabledCustom",void 0),(0,a.Z)(this,"isFirstTokenSelected",void 0),(0,a.Z)(this,"isAddLiquidity",void 0),(0,a.Z)(this,"filter",void 0),(0,a.Z)(this,"shouldBalanceBeHidden",void 0),(0,a.Z)(this,"assets",void 0),(0,a.Z)(this,"accountAssets",void 0),(0,a.Z)(this,"libraryTheme",void 0),(0,a.Z)(this,"whitelistAssets",void 0),(0,a.Z)(this,"isLoggedIn",void 0),(0,a.Z)(this,"whitelist",void 0),(0,a.Z)(this,"whitelistIdsBySymbol",void 0),(0,a.Z)(this,"addAsset",void 0)}async handleTabReset(s){s&&(this.tabValue=c()(this.tokenTabs))}get nonWhitelistAssets(){return g(this.assets,this.whitelist)}get nonWhitelistAccountAssets(){return g(this.accountAssets,this.whitelist)}get whitelistAssetsList(){let s=[];s=this.isAddLiquidity?this.isFirstTokenSelected?this.mainLPSources:this.whitelistAssets.filter((s=>s.address!==n.XOR.address)):this.whitelistAssets,this.isSynthsOnly&&(s=s.filter((s=>v.HM.test(s.address))));const t=s.map((s=>s.address)),e=this.asset?.address;return[...this.getAssetsWithBalances(t,e)].sort(this.sortByBalance)}get filteredWhitelistTokens(){return this.filterAssetsByQuery(this.whitelistAssetsList)(this.searchQuery)}get isCustomTabActive(){return this.tabValue===i.Custom}get shouldAssetsListBeShown(){return!(this.isCustomTabActive&&!this.activeAssetsList.length&&this.searchQuery)}get assetsListSize(){return this.isCustomTabActive?5:6}get activeAssetsList(){return(this.isCustomTabActive?this.sortedNonWhitelistAccountAssets:this.filteredWhitelistTokens).filter(this.filter)}get activeSearchPlaceholder(){return this.t(this.isCustomTabActive?"selectToken.custom.search":"selectToken.searchPlaceholder")}get alreadyAttached(){return!!this.nonWhitelistAccountAssets[this.searchQuery]}get customAsset(){return this.nonWhitelistAssets[this.searchQuery]??null}get sortedNonWhitelistAccountAssets(){const{asset:s}=this;return this.getAssetsWithBalances(Object.keys(this.nonWhitelistAccountAssets),s?.address).sort(this.sortByBalance)}get mainLPSources(){const s=l.hi.dex.poolBaseAssetsIds;return this.assets.filter((t=>s.includes(t.address)))}async handleAddAsset(){this.customAsset&&(this.isLoggedIn?(await this.withLoading((async()=>await this.addAsset((this.customAsset||{}).address))),this.handleClearSearch()):this.selectAsset(this.customAsset))}handleRemoveCustomAsset(s){l.hi.assets.removeAccountAsset(s.address)}handleTabChange(s){this.tabValue=s,this.clearAndFocusSearch()}};(0,o.gn)([(0,h.fI)({default:!1,type:Boolean})],m.prototype,"connected",void 0),(0,o.gn)([(0,h.fI)({default:A.u8,type:Object})],m.prototype,"asset",void 0),(0,o.gn)([(0,h.fI)({default:!1,type:Boolean})],m.prototype,"disabledCustom",void 0),(0,o.gn)([(0,h.fI)({default:!1,type:Boolean})],m.prototype,"isFirstTokenSelected",void 0),(0,o.gn)([(0,h.fI)({default:!1,type:Boolean})],m.prototype,"isAddLiquidity",void 0),(0,o.gn)([(0,h.fI)({default:()=>!0,type:Function})],m.prototype,"filter",void 0),(0,o.gn)([p.SB.wallet.settings.shouldBalanceBeHidden],m.prototype,"shouldBalanceBeHidden",void 0),(0,o.gn)([p.SB.wallet.account.assets],m.prototype,"assets",void 0),(0,o.gn)([p.SB.wallet.account.accountAssets],m.prototype,"accountAssets",void 0),(0,o.gn)([p.Yn.libraryTheme],m.prototype,"libraryTheme",void 0),(0,o.gn)([p.Yn.assets.whitelistAssets],m.prototype,"whitelistAssets",void 0),(0,o.gn)([p.Yn.wallet.account.isLoggedIn],m.prototype,"isLoggedIn",void 0),(0,o.gn)([p.Yn.wallet.account.whitelist],m.prototype,"whitelist",void 0),(0,o.gn)([p.Yn.wallet.account.whitelistIdsBySymbol],m.prototype,"whitelistIdsBySymbol",void 0),(0,o.gn)([p.aD.wallet.account.addAsset],m.prototype,"addAsset",void 0),(0,o.gn)([(0,h.RL)("visible")],m.prototype,"handleTabReset",null),m=(0,o.gn)([(0,h.wA)({components:{DialogBase:l.wx.DialogBase,SelectAssetList:(0,y.kF)(A.z8.SelectAssetList),SyntheticSwitcher:l.wx.SyntheticSwitcher,TokenAddress:l.wx.TokenAddress,SearchInput:l.wx.SearchInput,AddAssetDetailsCard:l.wx.AddAssetDetailsCard}})],m);var b=m,w=(0,e(1001).Z)(b,(function(){var s=this,t=s._self._c;s._self._setupProxy;return t("dialog-base",{attrs:{visible:s.isVisible,title:s.t("selectToken.title"),"custom-class":"asset-select","append-to-body":""},on:{"update:visible":function(t){s.isVisible=t}}},[t("s-tabs",{staticClass:"s-tabs--exchange",attrs:{value:s.tabValue,type:"rounded"},on:{input:s.handleTabChange}},[t("search-input",{ref:"search",staticClass:"token-search",attrs:{placeholder:s.activeSearchPlaceholder,autofocus:""},on:{clear:s.handleClearSearch},model:{value:s.query,callback:function(t){s.query=t},expression:"query"}}),t("s-tab",{attrs:{label:s.t("selectToken.assets.title"),name:"assets"}},[t("synthetic-switcher",{staticClass:"token-synthetic-switcher",model:{value:s.isSynthsOnly,callback:function(t){s.isSynthsOnly=t},expression:"isSynthsOnly"}})],1),t("s-tab",{staticClass:"asset-select__info",attrs:{disabled:s.disabledCustom,label:s.t("selectToken.custom.title"),name:"custom"}},[s.customAsset?[s.alreadyAttached?t("span",[s._v(s._s(s.t("selectToken.custom.alreadyAttached")))]):t("add-asset-details-card",{attrs:{asset:s.customAsset,theme:s.libraryTheme,whitelist:s.whitelist,"whitelist-ids-by-symbol":s.whitelistIdsBySymbol,loading:s.loading},on:{add:s.handleAddAsset}})]:s.searchQuery?t("span",[s._v(s._s(s.t("selectToken.custom.notFound")))]):s._e(),s.connected&&s.sortedNonWhitelistAccountAssets.length?t("div",{staticClass:"token-list_text"},[s._v(" "+s._s(s.sortedNonWhitelistAccountAssets.length)+" "+s._s(s.t("selectToken.custom.text"))+" ")]):s._e()],2),t("select-asset-list",{directives:[{name:"show",rawName:"v-show",value:s.shouldAssetsListBeShown,expression:"shouldAssetsListBeShown"}],attrs:{assets:s.activeAssetsList,size:s.assetsListSize,connected:s.connected,"should-balance-be-hidden":s.shouldBalanceBeHidden,"has-fiat-value":""},on:{click:s.selectAsset},scopedSlots:s._u([{key:"action",fn:function(e){return[s.isCustomTabActive?t("div",{staticClass:"token-item__remove",on:{click:function(t){return t.stopPropagation(),s.handleRemoveCustomAsset(e)}}},[t("s-icon",{attrs:{name:"basic-trash-24"}})],1):s._e()]}}])})],1)],1)}),[],!1,null,"4a2415e0",null).exports}}]);
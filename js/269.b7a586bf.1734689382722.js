"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[269],{20269:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var a=s(23166),i=s(97582),l=s(37981),o=s(86424),r=s(89445),n=s(68282),u=s(69781),d=s(50961),c=s(19316),h=s(46697),m=s(76858);let b=class extends((0,r.Wr)(m.Z,o.tA.DialogMixin,o.tA.LoadingMixin)){constructor(...e){super(...e),(0,a.Z)(this,"emission",void 0),(0,a.Z)(this,"baseAssetValue",""),(0,a.Z)(this,"poolAssetValue",""),(0,a.Z)(this,"intervals",[1,7,30,90]),(0,a.Z)(this,"interval",1),(0,a.Z)(this,"link",n.yX.demeterFarmingPlatform)}resetValue(){this.baseAssetValue="",this.poolAssetValue=""}get networkFee(){return this.networkFees[l.Operation.DemeterFarmingDepositLiquidity]}get selectedPeriod(){return String(this.interval)}get rewardsText(){return this.t("demeterFarming.rewards",{symbol:this.rewardAssetSymbol})}get baseAssetDecimals(){return this.baseAsset?.decimals??l.FPNumber.DEFAULT_PRECISION}get baseAssetBalance(){return this.baseAsset?l.FPNumber.fromCodecValue((0,d.rh)(this.baseAsset)??0,this.baseAssetDecimals):l.FPNumber.ZERO}get isBaseAssetMaxButtonAvailable(){return!!this.baseAsset&&(0,d.oI)(this.baseAsset,this.baseAssetValue,this.networkFee,this.xor)}get isPoolAssetMaxButtonAvailable(){return!!this.poolAsset&&(0,d.oI)(this.poolAsset,this.poolAssetValue,this.networkFee,this.xor)}get userTokensDeposit(){return this.isFarm?this.lpBalance.mul(new l.FPNumber(this.poolAssetValue||0)).div(l.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)):new l.FPNumber(this.poolAssetValue||0)}get userTokensDepositWithFee(){const e=new l.FPNumber(this.depositFee);return this.userTokensDeposit.mul(l.FPNumber.ONE.sub(e))}get calculatedRewards(){if(!this.pool)return l.FPNumber.ZERO;const e=this.pool.totalTokensInPool.add(this.userTokensDepositWithFee);if(e.isZero())return l.FPNumber.ZERO;const t=new l.FPNumber(this.interval),s=new l.FPNumber(14400),a=t.mul(s);return this.emission.mul(a).mul(this.userTokensDepositWithFee).div(e)}get calculatedRewardsFormatted(){return this.calculatedRewards.toLocaleString()}get calculatedRewardsFiat(){return this.rewardAsset?this.getFiatAmountByFPNumber(this.calculatedRewards,this.rewardAsset):null}get calculatedRoiPercent(){const e=new l.FPNumber(this.poolAssetValue||0);if(e.isZero()||this.poolAssetPrice.isZero())return l.FPNumber.ZERO;const t=this.isFarm?2:1,s=e.mul(new l.FPNumber(t)).mul(this.poolAssetPrice),a=s.mul(new l.FPNumber(this.depositFee)),i=l.FPNumber.fromCodecValue(this.networkFee).mul(l.FPNumber.fromCodecValue(this.getAssetFiatPrice(this.xor)??0)),o=a.add(i);return this.calculatedRewards.mul(this.rewardAssetPrice).sub(o).div(s).mul(l.FPNumber.HUNDRED)}get calculatedRoiPercentFormatted(){return(0,d.Gc)(this.calculatedRoiPercent,!0)}selectPeriod(e){this.interval=Number(e)}handleBaseAssetValue(e){this.baseAssetValue=e,e?this.liquidity&&(this.poolAssetValue=new l.FPNumber(this.baseAssetValue).mul(l.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)).div(l.FPNumber.fromCodecValue(this.liquidity?.firstBalance??0)).toString()):this.poolAssetValue=""}handlePoolAssetValue(e){this.poolAssetValue=e,e?this.liquidity&&(this.baseAssetValue=new l.FPNumber(this.poolAssetValue).mul(l.FPNumber.fromCodecValue(this.liquidity?.firstBalance??0)).div(l.FPNumber.fromCodecValue(this.liquidity?.secondBalance??0)).toString()):this.baseAssetValue=""}handleBaseAssetMax(){this.baseAsset&&this.handleBaseAssetValue((0,d.MN)(this.baseAsset,this.networkFee))}handlePoolAssetMax(){this.poolAsset&&this.handlePoolAssetValue((0,d.MN)(this.poolAsset,this.networkFee))}};(0,i.gn)([(0,r.fI)({default:()=>l.FPNumber.ZERO,type:Object})],b.prototype,"emission",void 0),(0,i.gn)([(0,r.RL)("visible")],b.prototype,"resetValue",null),b=(0,i.gn)([(0,r.wA)({components:{DialogTitle:(0,c.Y)(h.o.DialogTitle),TokenInput:(0,u.kF)(n.z8.TokenInput),DialogBase:o.wx.DialogBase,InfoLine:o.wx.InfoLine}})],b);var A=b,p=(0,s(1001).Z)(A,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("dialog-base",{attrs:{visible:e.isVisible,title:`${e.TranslationConsts.APR} ${e.t("demeterFarming.calculator")}`},on:{"update:visible":function(t){e.isVisible=t}}},[t("div",{staticClass:"calculator-dialog"},[t("dialog-title",{attrs:{"base-asset":e.baseAsset,"pool-asset":e.poolAsset,"is-farm":e.isFarm}}),t("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[e.isFarm&&e.baseAsset?[t("token-input",{attrs:{balance:e.baseAssetBalance.toCodecString(),"is-max-available":e.isBaseAssetMaxButtonAvailable,title:e.t("demeterFarming.amountAdd"),token:e.baseAsset,value:e.baseAssetValue},on:{input:e.handleBaseAssetValue,max:e.handleBaseAssetMax}}),e.poolAsset?t("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}):e._e()]:e._e(),e.poolAsset?t("token-input",{attrs:{balance:e.poolAssetBalance.toCodecString(),"is-max-available":e.isPoolAssetMaxButtonAvailable,title:e.t("demeterFarming.amountAdd"),token:e.poolAsset,value:e.poolAssetValue},on:{input:e.handlePoolAssetValue,max:e.handlePoolAssetMax}}):e._e()],2),t("div",{staticClass:"duration"},[t("info-line",{staticClass:"duration-title",attrs:{label:"Duration"}}),t("s-tabs",{staticClass:"duration-tabs",attrs:{type:"rounded",value:e.selectedPeriod},on:{input:e.selectPeriod}},e._l(e.intervals,(function(e){return t("s-tab",{key:e,attrs:{name:String(e),label:`${e}D`}})})),1)],1),t("div",{staticClass:"results"},[t("div",{staticClass:"results-title"},[e._v(e._s(e.TranslationConsts.APR)+" "+e._s(e.t("demeterFarming.results")))]),t("info-line",{attrs:{label:e.TranslationConsts.ROI,"label-tooltip":e.t("tooltips.roi"),value:e.calculatedRoiPercentFormatted}}),t("info-line",{attrs:{label:e.rewardsText,value:e.calculatedRewardsFormatted,"fiat-value":e.calculatedRewardsFiat}})],1),t("a",{staticClass:"demeter-copyright",attrs:{href:e.link,target:"_blank",rel:"nofollow noopener"}},[e._v(" "+e._s(e.t("demeterFarming.poweredBy"))+" ")])],1)])}),[],!1,null,"30f574a9",null).exports}}]);
"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[1584],{21584:function(t,e,a){a.r(e),a.d(e,{default:function(){return S}});var o,r=a(60760),s=a(70655),i=a(53545),n=a(50576),c=a(94930),d=a(74614),p=a(80710),u=a(16546),l=a(21251);!function(t){t.StartPage="StartPage",t.KYC="KYC",t.ConfirmationInfo="ConfirmationInfo"}(o||(o={}));let h=class extends((0,i.Wr)(n.tA.LoadingMixin,c.Z)){constructor(...t){super(...t),(0,r.Z)(this,"hasFreeAttempts",void 0),(0,r.Z)(this,"wantsToPassKycAgain",void 0),(0,r.Z)(this,"currentStatus",void 0),(0,r.Z)(this,"soraCardEnabled",void 0),(0,r.Z)(this,"setKycStatus",void 0),(0,r.Z)(this,"setVerificationStatus",void 0),(0,r.Z)(this,"getUserStatus",void 0),(0,r.Z)(this,"subscribeToTotalXorBalance",void 0),(0,r.Z)(this,"unsubscribeFromTotalXorBalance",void 0),(0,r.Z)(this,"step",null),(0,r.Z)(this,"userApplied",!1),(0,r.Z)(this,"openKycForm",!1),(0,r.Z)(this,"Step",o)}checkAvailability(t){!1===t&&(0,p.WF)(u.sn.Swap)}confirmApply(t){this.userApplied=t,this.step=o.KYC}openStartPage(t){if(t)return this.setKycStatus(l.a.Completed),this.setVerificationStatus(l.$.Pending),void(this.step=o.ConfirmationInfo);this.checkKyc()}get hasTokens(){const t=localStorage.getItem("PW-token"),e=localStorage.getItem("PW-refresh-token");return"undefined"!==e&&(!!t&&!!e)}async checkKyc(){return await this.getUserStatus(),this.currentStatus===l.$.Rejected&&this.wantsToPassKycAgain&&this.hasFreeAttempts?(this.openKycForm=!0,void(this.step=o.KYC)):this.currentStatus?void(this.step=o.ConfirmationInfo):this.hasTokens?(this.openKycForm=!0,void(this.step=o.KYC)):void(this.step=o.StartPage)}created(){this.subscribeToTotalXorBalance()}async beforeDestroy(){await this.unsubscribeFromTotalXorBalance()}mounted(){this.checkKyc()}};(0,s.__decorate)([d.SB.soraCard.hasFreeAttempts],h.prototype,"hasFreeAttempts",void 0),(0,s.__decorate)([d.SB.soraCard.wantsToPassKycAgain],h.prototype,"wantsToPassKycAgain",void 0),(0,s.__decorate)([d.Yn.soraCard.currentStatus],h.prototype,"currentStatus",void 0),(0,s.__decorate)([d.Yn.settings.soraCardEnabled],h.prototype,"soraCardEnabled",void 0),(0,s.__decorate)([d.QF.soraCard.setKycStatus],h.prototype,"setKycStatus",void 0),(0,s.__decorate)([d.QF.soraCard.setVerificationStatus],h.prototype,"setVerificationStatus",void 0),(0,s.__decorate)([d.aD.soraCard.getUserStatus],h.prototype,"getUserStatus",void 0),(0,s.__decorate)([d.aD.soraCard.subscribeToTotalXorBalance],h.prototype,"subscribeToTotalXorBalance",void 0),(0,s.__decorate)([d.aD.soraCard.unsubscribeFromTotalXorBalance],h.prototype,"unsubscribeFromTotalXorBalance",void 0),(0,s.__decorate)([(0,i.RL)("soraCardEnabled",{immediate:!0})],h.prototype,"checkAvailability",null),h=(0,s.__decorate)([(0,i.wA)({components:{SoraCardIntro:(0,p.kF)(u.z8.SoraCardIntroPage),SoraCardKyc:(0,p.kF)(u.z8.SoraCardKYC),ConfirmationInfo:(0,p.kF)(u.z8.ConfirmationInfo)}})],h);var y=h,S=(0,a(1001).Z)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.step===t.Step.ConfirmationInfo?a("confirmation-info",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],on:{"confirm-apply":t.openStartPage}}):t.step===t.Step.StartPage?a("sora-card-intro",{on:{"confirm-apply":t.confirmApply}}):t.step===t.Step.KYC?a("sora-card-kyc",{attrs:{userApplied:t.userApplied,openKycForm:t.openKycForm},on:{"go-to-start":t.openStartPage}}):t._e()],1)}),[],!1,null,null,null).exports}}]);
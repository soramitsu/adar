"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[7184],{97184:function(t,s,i){i.r(s),i.d(s,{default:function(){return P}});var e=i(60760),a=i(70655),r=i(53545),o=i(50576),n=i(36930),h=i(32806),c=i(63280),d=i(12759),u=i(41468),l=i(80710),g=i(16546),y=i(74614),m=i(28335);let p=class extends((0,r.Wr)(h.Z,c.Z,d.Z,u.Z,o.tA.PaginationSearchMixin,o.tA.NumberFormatterMixin)){constructor(...t){super(...t),(0,e.Z)(this,"registeredAssets",void 0),(0,e.Z)(this,"historyLoading",void 0),(0,e.Z)(this,"historyPage",void 0),(0,e.Z)(this,"updateHistory",void 0),(0,e.Z)(this,"pageAmount",8),(0,e.Z)(this,"loading",!0)}get filteredHistory(){return this.history?.length?this.getFilteredHistory(this.sortTransactions([...this.history],this.isLtrDirection)):[]}get total(){return this.filteredHistory.length}get hasHistory(){return this.filteredHistoryItems&&this.total>0}get filteredHistoryItems(){const t=this.isLtrDirection?Math.min(this.currentPage*this.pageAmount,this.filteredHistory.length):Math.max((this.lastPage-this.currentPage+1)*this.pageAmount-this.directionShift,0),s=this.isLtrDirection?Math.max(t-this.pageAmount,0):Math.max((this.lastPage-this.currentPage)*this.pageAmount-this.directionShift,0);return this.sortTransactions(this.getPageItems(this.filteredHistory,s,t),!0)}created(){this.withParentLoading((async()=>{this.setHistory(),await this.updateHistory(),1!==this.historyPage&&(this.currentPage=this.historyPage,1!==this.currentPage&&this.currentPage===this.lastPage&&(this.isLtrDirection=!1))})).finally((()=>{this.loading=!1}))}getFilteredHistory(t){if(this.query){const s=this.query.toLowerCase().trim();return t.filter((t=>`${t.assetAddress}`.toLowerCase().includes(s)||`${this.registeredAssets.find((s=>s.address===t.assetAddress))?.externalAddress}`.toLowerCase().includes(s)||`${t.symbol}`.toLowerCase().includes(s)))}return t}formatAmount(t){if(!t.amount)return"";const s=this.registeredAssets?.find((s=>s.address===t.address))?.decimals;return this.formatStringValue(t.amount,s)}formatHistoryDate(t){return this.formatDate(t?.startTime??Date.now())}isWaitingForAction(t){return t.status===n.BridgeTxStatus.Failed&&(0,m.rz)(t)}historyStatusClasses(t){const s="history-item-status",i=[s];return this.isWaitingForAction(t)?i.push(`${s}--info`):t.status===n.BridgeTxStatus.Failed?i.push(`${s}--error`):t.status===n.BridgeTxStatus.Done?i.push(`${s}--success`):i.push(`${s}--pending`),i.join(" ")}historyStatusIconName(t){return this.isWaitingForAction(t)?"notifications-alert-triangle-24":t.status===n.BridgeTxStatus.Failed?"basic-clear-X-24":t.status===n.BridgeTxStatus.Done?"basic-check-marks-24":"time-time-24"}historyStatusText(t){return this.isWaitingForAction(t)?this.t("bridgeHistory.statusAction"):""}async handlePaginationClick(t){let s=1;switch(t){case o.it.PaginationButton.Prev:s=this.currentPage-1;break;case o.it.PaginationButton.Next:s=this.currentPage+1,s===this.lastPage&&(this.isLtrDirection=!1);break;case o.it.PaginationButton.First:this.isLtrDirection=!0;break;case o.it.PaginationButton.Last:s=this.lastPage,this.isLtrDirection=!1}await this.updateHistory(),this.currentPage=s,this.setHistoryPage(this.currentPage)}handleBack(){this.setHistoryPage(1),l.ZP.push({name:g.sn.Bridge})}handleResetSearch(){this.resetPage(),this.resetSearch()}};(0,a.__decorate)([y.SB.assets.registeredAssets],p.prototype,"registeredAssets",void 0),(0,a.__decorate)([y.SB.bridge.historyLoading],p.prototype,"historyLoading",void 0),(0,a.__decorate)([y.SB.bridge.historyPage],p.prototype,"historyPage",void 0),(0,a.__decorate)([y.aD.bridge.updateHistory],p.prototype,"updateHistory",void 0),p=(0,a.__decorate)([(0,r.wA)({components:{GenericPageHeader:(0,l.kF)(g.z8.GenericPageHeader),SearchInput:o.wx.SearchInput,FormattedAmount:o.wx.FormattedAmount,HistoryPagination:o.wx.HistoryPagination}})],p);var f=p,P=(0,i(1001).Z)(f,(function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"history-container"},[i("s-card",{directives:[{name:"loading",rawName:"v-loading",value:t.parentLoading,expression:"parentLoading"}],staticClass:"history-content",attrs:{"border-radius":"medium",shadow:"always",primary:""}},[i("generic-page-header",{attrs:{"has-button-back":"",title:t.t("bridgeHistory.title")},on:{back:t.handleBack}},[i("s-button",{attrs:{type:"action",icon:"arrows-swap-90-24",disabled:t.historyLoading,tooltip:t.t("bridgeHistory.restoreHistory")},on:{click:function(s){return t.updateHistory(!0)}}})],1),i("s-form",{staticClass:"history-form",attrs:{"show-message":!1}},[t.history.length?i("search-input",{staticClass:"history--search",attrs:{placeholder:t.t("bridgeHistory.filterPlaceholder"),autofocus:""},on:{clear:t.handleResetSearch},model:{value:t.query,callback:function(s){t.query=s},expression:"query"}}):t._e(),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"history-items"},[t.hasHistory?t._l(t.filteredHistoryItems,(function(s){return i("div",{directives:[{name:"button",rawName:"v-button"}],key:"history-"+s.id,staticClass:"history-item",attrs:{tabindex:"0"},on:{click:function(i){return t.showHistory(s.id)}}},[i("div",{staticClass:"history-item-info"},[i("div",{staticClass:"history-item-title p4"},[i("formatted-amount",{attrs:{"value-can-be-hidden":"",value:t.formatAmount(s),"asset-symbol":s.symbol}}),i("i",{class:"s-icon--network s-icon-"+(t.isOutgoingType(s.type)?"sora":t.getEvmIcon(s.externalNetwork))}),i("span",{staticClass:"history-item-title-separator"},[t._v(" "+t._s(t.t("bridgeTransaction.for"))+" ")]),i("formatted-amount",{attrs:{"value-can-be-hidden":"",value:t.formatAmount(s),"asset-symbol":s.symbol}}),i("i",{class:"s-icon--network s-icon-"+(t.isOutgoingType(s.type)?t.getEvmIcon(s.externalNetwork):"sora")})],1),i("div",{staticClass:"history-item-date"},[t._v(t._s(t.formatHistoryDate(s)))])]),i("div",{class:t.historyStatusClasses(s)},[i("div",{staticClass:"history-item-status-text"},[t._v(t._s(t.historyStatusText(s)))]),i("s-icon",{staticClass:"history-item-status-icon",attrs:{name:t.historyStatusIconName(s),size:"16"}})],1)])})):i("p",{staticClass:"history-empty p4"},[t._v(t._s(t.t("bridgeHistory.empty")))]),t.hasHistory?i("history-pagination",{attrs:{"current-page":t.currentPage,"page-amount":t.pageAmount,loading:t.loading,total:t.total,"last-page":t.lastPage},on:{"pagination-click":t.handlePaginationClick}}):t._e()],2)],1)],1)],1)}),[],!1,null,"4ecdc191",null).exports}}]);
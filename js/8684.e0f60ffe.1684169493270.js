"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[8684],{88684:function(e,t,r){r.r(t),r.d(t,{default:function(){return g}});var i=r(60760),a=r(70655),s=r(18139),o=r(53545),n=r(55877),c=r(50576),d=r(32806),l=r(74614),h=r(43479),u=r(25108);let y=class extends((0,o.Wr)(d.Z,c.tA.NotificationMixin)){constructor(...e){super(...e),(0,i.Z)(this,"soraNetwork",void 0),(0,i.Z)(this,"accessToken",void 0),(0,i.Z)(this,"loadingKycView",!0)}async getReferenceNumber(e){const{kycService:t}=(0,h.It)(this.soraNetwork),r=localStorage.getItem("PW-token");try{const t=await fetch(e,{method:"POST",body:JSON.stringify({ReferenceID:(0,n.v4)(),MobileNumber:"",Email:"",AddressChanged:!1,DocumentChanged:!1,IbanTypeID:null,CardTypeID:null,AdditionalData:""}),headers:{Authorization:`Bearer ${r}`}});return(await t.json()).ReferenceNumber}catch(e){u.error("[SoraCard]: Error while initiating KYC",e),this.showAppNotification(this.t("card.infoMessageTryAgain")),this.$emit("confirm-kyc",!1),(0,s.td)(t.sdkURL)}}async mounted(){const{kycService:e,soraProxy:t}=(0,h.It)(this.soraNetwork),r=await this.getReferenceNumber(t.referenceNumberEndpoint);await(0,s.td)(e.sdkURL).catch((()=>{})),(0,s.ve)(e.sdkURL).then((()=>{Paywings.WebKyc.create({KycCredentials:{Username:e.username,Password:e.pass,Domain:"soracard.com",env:e.env,UnifiedLoginApiKey:e.unifiedApiKey},KycSettings:{AppReferenceID:(0,n.v4)(),Language:"en",ReferenceNumber:r,ElementId:"#kyc",Logo:"",WelcomeHidden:!1,WelcomeTitle:"",DocumentCheckWindowHeight:"50vh",DocumentCheckWindowWidth:"100%",HideLoader:!0},KycUserData:{FirstName:"",MiddleName:"",LastName:"",Email:"",MobileNumber:"",Address1:"",Address2:"",Address3:"",ZipCode:"",City:"",State:"",CountryCode:""},UserCredentials:{AccessToken:localStorage.getItem("PW-token"),RefreshToken:localStorage.getItem("PW-refresh-token")}}).on("Error",(t=>{u.error("[SoraCard]: Error while initiating KYC",t),this.showAppNotification(this.t("card.infoMessageTryAgain")),this.$emit("confirm-kyc",!1),(0,s.td)(e.sdkURL)})).on("Success",(t=>{this.$emit("confirm-kyc",!0),(0,s.td)(e.sdkURL)}))})).catch((()=>{})),setTimeout((()=>{this.loadingKycView=!1}),5e3)}};(0,a.__decorate)([l.SB.wallet.settings.soraNetwork],y.prototype,"soraNetwork",void 0),(0,a.__decorate)([(0,o.fI)({default:"",type:String})],y.prototype,"accessToken",void 0),y=(0,a.__decorate)([o.wA],y);var m=y,g=(0,r(1001).Z)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"sora-card sora-card-kyc-wrapper"},[r("div",[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingKycView,expression:"loadingKycView"}],staticClass:"sora-card-kyc-view"},[r("s-scrollbar",[r("div",{attrs:{id:"kyc"}}),r("div",{staticStyle:{display:"none"},attrs:{id:"finish"}},[r("div",{staticClass:"alert alert-success"},[e._v("Kyc was successfull, sample integrator response displayed here")])])])],1)])])}),[],!1,null,null,null).exports}}]);
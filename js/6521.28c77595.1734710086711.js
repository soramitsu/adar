"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[6521],{16521:function(t,e,i){i.r(e),i.d(e,{default:function(){return f}});var a=i(23166),l=i(97582),s=i(37981),n=i(86424),o=i(89445),r=i(89334),u=i(68282),d=i(69781),c=i(49053);let p=class extends((0,o.Wr)(n.tA.NumberFormatterMixin,n.tA.FormattedAmountMixin,r.Z)){constructor(...t){super(...t),(0,a.Z)(this,"currencySymbol",void 0),(0,a.Z)(this,"exchangeRate",void 0),(0,a.Z)(this,"setAmountSliderValue",void 0),(0,a.Z)(this,"delimiters",s.FPNumber.DELIMITERS_CONFIG),(0,a.Z)(this,"value",void 0),(0,a.Z)(this,"max",void 0),(0,a.Z)(this,"token",void 0),(0,a.Z)(this,"balance",void 0),(0,a.Z)(this,"title",void 0),(0,a.Z)(this,"balanceText",void 0),(0,a.Z)(this,"external",void 0),(0,a.Z)(this,"loading",void 0),(0,a.Z)(this,"disabled",void 0),(0,a.Z)(this,"isMaxAvailable",void 0),(0,a.Z)(this,"isSelectAvailable",void 0),(0,a.Z)(this,"withSlider",void 0),(0,a.Z)(this,"isFiatEditable",void 0),(0,a.Z)(this,"sliderValue",void 0),(0,a.Z)(this,"fiatDecimals",void 0),(0,a.Z)(this,"withAddress",void 0),(0,a.Z)(this,"floatInput",void 0),(0,a.Z)(this,"fiatEl",void 0),(0,a.Z)(this,"fiatValue",""),(0,a.Z)(this,"fiatFocus",!1)}updateFiatValue(){this.fiatFocus||(this.fiatValue=this.fiatAmount.isZero()?"":this.fiatAmount.toFixed(this.fiatDecimals))}reactToCurrencyChange(){this.setFiatValue(this.fiatValue)}recalcValue(t){const e=new s.FPNumber(t).div(this.exchangeRate),i=!this.tokenPrice.isZero()&&t?new s.FPNumber(e).div(this.tokenPrice).toString():"";this.$emit("input",i)}setFiatValue(t){this.fiatValue=t===this.maxFiatValueFormatted?this.maxFiatValue.toFixed(this.fiatDecimals):t,this.recalcValue(t)}handleFiatFocus(){this.fiatFocus=!0,this.$emit("focus")}handleFiatBlur(){this.fiatFocus=!1}get slideValue(){return this.sliderValue}set slideValue(t){this.setAmountSliderValue(t)}get isBalanceAvailable(){return!!this.balance&&!!this.token}get address(){return(this.external?this.token?.externalAddress:this.token?.address)??""}get decimals(){return(this.external?this.token?.externalDecimals:this.token?.decimals)??s.FPNumber.DEFAULT_PRECISION}get tokenPrice(){return this.token?s.FPNumber.fromCodecValue(this.getAssetFiatPrice(this.token)??u.m8):s.FPNumber.ZERO}get hasFiatValue(){return!this.tokenPrice.isZero()}get fpBalance(){return s.FPNumber.fromCodecValue(this.balance??u.m8,this.decimals)}get formattedBalance(){return this.fpBalance.toLocaleString()}get formattedFiatBalance(){return this.fpBalance.mul(this.tokenPrice).toLocaleString()}get fiatAmount(){return this.calcFiatAmount(this.value)}get maxValue(){return this.max||this.MaxInputNumber}get maxFiatValue(){return this.calcFiatAmount(this.maxValue)}get maxFiatValueFormatted(){return this.maxFiatValue.toString()}calcFiatAmount(t){if(!t)return s.FPNumber.ZERO;const e=this.tokenPrice.mul(this.exchangeRate);return new s.FPNumber(t).mul(e)}handleMax(){this.$emit("max",this.token)}handleSelectToken(){this.$emit("select")}handleSlideInputChange(t){this.$emit("slide",t)}handleSlideClick(){this.fiatEl?.$children?.[0]?.blur?.()}focus(){this.floatInput?.inputComponent?.focus?.()}};(0,l.gn)([c.Yn.wallet.settings.currencySymbol],p.prototype,"currencySymbol",void 0),(0,l.gn)([c.Yn.wallet.settings.exchangeRate],p.prototype,"exchangeRate",void 0),(0,l.gn)([c.QF.orderBook.setAmountSliderValue],p.prototype,"setAmountSliderValue",void 0),(0,l.gn)([(0,o.fI)({type:String})],p.prototype,"value",void 0),(0,l.gn)([(0,o.fI)({type:[String,Number]})],p.prototype,"max",void 0),(0,l.gn)([(0,o.fI)({default:()=>null,type:Object})],p.prototype,"token",void 0),(0,l.gn)([(0,o.fI)({default:()=>null,type:String})],p.prototype,"balance",void 0),(0,l.gn)([(0,o.fI)({default:"",type:String})],p.prototype,"title",void 0),(0,l.gn)([(0,o.fI)({default:"",type:String})],p.prototype,"balanceText",void 0),(0,l.gn)([(0,o.fI)({default:!1,type:Boolean})],p.prototype,"external",void 0),(0,l.gn)([(0,o.fI)({default:!1,type:Boolean})],p.prototype,"loading",void 0),(0,l.gn)([(0,o.fI)({default:!1,type:Boolean})],p.prototype,"disabled",void 0),(0,l.gn)([(0,o.fI)({default:!1,type:Boolean})],p.prototype,"isMaxAvailable",void 0),(0,l.gn)([(0,o.fI)({default:!1,type:Boolean})],p.prototype,"isSelectAvailable",void 0),(0,l.gn)([(0,o.fI)({default:!1,type:Boolean})],p.prototype,"withSlider",void 0),(0,l.gn)([(0,o.fI)({default:!0,type:Boolean})],p.prototype,"isFiatEditable",void 0),(0,l.gn)([(0,o.fI)({default:0,type:Number})],p.prototype,"sliderValue",void 0),(0,l.gn)([(0,o.fI)({default:2,type:Number})],p.prototype,"fiatDecimals",void 0),(0,l.gn)([(0,o.fI)({default:!1,type:Boolean})],p.prototype,"withAddress",void 0),(0,l.gn)([(0,o.Rl)("floatInput")],p.prototype,"floatInput",void 0),(0,l.gn)([(0,o.Rl)("fiatEl")],p.prototype,"fiatEl",void 0),(0,l.gn)([(0,o.RL)("fiatAmount",{immediate:!0})],p.prototype,"updateFiatValue",null),(0,l.gn)([(0,o.RL)("currency",{immediate:!0})],p.prototype,"reactToCurrencyChange",null),p=(0,l.gn)([(0,o.wA)({components:{TokenSelectButton:(0,d.kF)(u.z8.TokenSelectButton),FormattedAmount:n.wx.FormattedAmount,FormattedAmountWithFiatValue:n.wx.FormattedAmountWithFiatValue,TokenAddress:n.wx.TokenAddress}})],p);var h=p,m=(0,i(1001).Z)(h,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("s-float-input",t._g(t._b({ref:"floatInput",staticClass:"token-input",attrs:{size:"medium","has-locale-string":"",disabled:t.disabled,value:t.value,max:t.maxValue},scopedSlots:t._u([{key:"bottom",fn:function(){return[t._t("bottom",(function(){return[e("div",{staticClass:"input-line input-line--footer"},[t.hasFiatValue?e("div",{staticClass:"s-flex"},[e("s-float-input",{ref:"fiatEl",staticClass:"token-input--fiat",attrs:{size:"mini","has-locale-string":"",decimals:2,delimiters:t.$attrs.delimiters,disabled:t.disabled,max:t.maxFiatValueFormatted,readonly:!t.isFiatEditable,value:t.fiatValue},on:{input:t.setFiatValue,focus:t.handleFiatFocus,blur:t.handleFiatBlur}},[e("span",{staticClass:"input-prefix",attrs:{slot:"left"},slot:"left"},[t._v(t._s(t.currencySymbol))])]),t._t("fiat-amount-append")],2):t._e(),t.withAddress&&t.address?e("token-address",t._b({staticClass:"input-value",attrs:{external:t.external}},"token-address",t.token,!1)):t._e()],1),t.withSlider?e("div",{staticClass:"input-line--footer-with-slider"},[e("div",{staticClass:"delimiter"}),e("s-slider",{staticClass:"slider-container",attrs:{value:t.slideValue,disabled:!t.withSlider||t.disabled,"show-tooltip":!1,marks:{0:"",25:"",50:"",75:"",100:""}},on:{input:t.handleSlideInputChange},nativeOn:{mousedown:function(e){return t.handleSlideClick.apply(null,arguments)}}})],1):t._e()]})),t._t("default")]},proxy:!0}],null,!0)},"s-float-input",{decimals:t.decimals,delimiters:t.delimiters,...t.$attrs},!1),t.$listeners),[e("div",{staticClass:"input-line",attrs:{slot:"top"},slot:"top"},[e("div",{staticClass:"input-title"},[e("span",{staticClass:"input-title--uppercase input-title--primary"},[t._v(t._s(t.title))]),t._t("title-append")],2),e("div",{staticClass:"input-value"},[t._t("balance",(function(){return[t.isBalanceAvailable?[e("span",{staticClass:"input-value--uppercase"},[t._v(t._s(t.balanceText||t.t("balanceText")))]),e("formatted-amount-with-fiat-value",{attrs:{"value-can-be-hidden":"","with-left-shift":"","value-class":"input-value--primary",value:t.formattedBalance,"has-fiat-value":t.hasFiatValue,"fiat-value":t.formattedFiatBalance}})]:t._e()]}))],2)]),e("div",{staticClass:"s-flex el-buttons",attrs:{slot:"right"},slot:"right"},[t.isMaxAvailable?e("s-button",{staticClass:"el-button--max s-typography-button--small",attrs:{type:"primary",alternative:"",size:"mini","border-radius":"mini",loading:t.loading,disabled:t.disabled},on:{click:function(e){return e.stopPropagation(),t.handleMax.apply(null,arguments)}}},[t._v(" "+t._s(t.t("buttons.max"))+" ")]):t._e(),t.token||t.isSelectAvailable?e("token-select-button",{attrs:{icon:"chevron-down-rounded-16",disabled:!t.isSelectAvailable,token:t.token},on:{click:function(e){return e.stopPropagation(),t.handleSelectToken.apply(null,arguments)}}}):t._e()],1)])}),[],!1,null,"dc5df982",null),f=m.exports}}]);
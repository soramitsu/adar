"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[1836],{91836:function(e,i,t){t.r(i),t.d(i,{default:function(){return S}});var s=t(60760),o=t(70655),n=t(53545),a=t(50576),d=t(36930),r=t(82753),l=t(68850),c=t(91487),u=t(33312),h=t(2591),k=t(67814),p=t(80710),f=t(16546),T=t(74614),y=t(85530),g=t(93034);let v=class extends((0,n.Wr)(a.tA.TransactionMixin,a.tA.NetworkFeeWarningMixin,u.Z,h.Z,l.Z,c.Z,k.Z)){constructor(...e){super(...e),(0,s.Z)(this,"FocusedField",g.G),(0,s.Z)(this,"slippageToleranceValue",void 0),(0,s.Z)(this,"xor",void 0),(0,s.Z)(this,"isLoggedIn",void 0),(0,s.Z)(this,"shareOfPool",void 0),(0,s.Z)(this,"liquidityInfo",void 0),(0,s.Z)(this,"isNotFirstLiquidityProvider",void 0),(0,s.Z)(this,"setFirstTokenAddress",void 0),(0,s.Z)(this,"setSecondTokenAddress",void 0),(0,s.Z)(this,"addLiquidity",void 0),(0,s.Z)(this,"updateSubscriptions",void 0),(0,s.Z)(this,"resetSubscriptions",void 0),(0,s.Z)(this,"resetData",void 0),(0,s.Z)(this,"setData",void 0),(0,s.Z)(this,"setFirstTokenValue",void 0),(0,s.Z)(this,"setSecondTokenValue",void 0),(0,s.Z)(this,"setFocusedField",void 0),(0,s.Z)(this,"showSelectTokenDialog",!1),(0,s.Z)(this,"isFirstTokenSelected",!1),(0,s.Z)(this,"insufficientBalanceTokenSymbol","")}handleLoggedInStateChange(e,i){i&&!e&&this.handleBack()}updateConnectionSubsriptions(e){e?this.updateSubscriptions():this.resetSubscriptions()}async mounted(){await this.withParentLoading((async()=>{this.parseCurrentRoute(),this.isValidRoute&&this.firstRouteAddress&&this.secondRouteAddress?await this.setData({firstAddress:this.firstRouteAddress,secondAddress:this.secondRouteAddress}):await this.setFirstTokenAddress(r.XOR.address)}))}destroyed(){this.resetData()}get areTokensSelected(){return!(!this.firstToken||!this.secondToken)}get removeLiquidityFormattedFee(){return this.formatCodecNumber(this.networkFees[d.Operation.RemoveLiquidity])}get isXorSufficientForNextOperation(){const e={type:this.isAvailable?d.Operation.AddLiquidity:d.Operation.CreatePair};return this.firstToken?.address===r.XOR.address&&(e.amount=this.getFPNumber(this.firstTokenValue),e.isXor=!0),this.isXorSufficientForNextTx(e)}get isFirstMaxButtonAvailable(){return!!this.firstToken&&(this.isLoggedIn&&(0,y.oI)(this.areTokensSelected,this.firstToken,this.firstTokenValue,this.networkFee,this.xor))}get isSecondMaxButtonAvailable(){return!!this.secondToken&&(this.isLoggedIn&&(0,y.oI)(this.areTokensSelected,this.secondToken,this.secondTokenValue,this.networkFee,this.xor))}get isInsufficientBalance(){if(this.isLoggedIn&&this.areTokensSelected){if((0,y.Vl)(this.firstToken,this.firstTokenValue,this.networkFee))return this.insufficientBalanceTokenSymbol=this.firstToken.symbol,!0;if((0,y.Vl)(this.secondToken,this.secondTokenValue,this.networkFee))return this.insufficientBalanceTokenSymbol=this.secondToken.symbol,!0}return this.insufficientBalanceTokenSymbol="",!1}async handleAddLiquidityMaxValue(e,i){e&&await this.handleTokenChange((0,y.MN)(e,this.networkFee),i)}async handleAddLiquidity(){if(this.allowFeePopup&&!this.isXorSufficientForNextOperation){if(this.openWarningFeeDialog(),await this.waitOnNextTxFailureConfirmation(),!this.isWarningFeeDialogConfirmed)return;this.isWarningFeeDialogConfirmed=!1}this.openConfirmDialog()}async handleTokenChange(e,i){await i(e)}getTokenBalance(e){return(0,y.rh)(e)}openSelectTokenDialog(e){this.isFirstTokenSelected=e,this.showSelectTokenDialog=!0}async selectToken(e){const i=e?.address;i&&await this.withSelectAssetLoading((async()=>{this.isFirstTokenSelected?await this.setFirstTokenAddress(i):await this.setSecondTokenAddress(i),this.firstToken?.address===r.XSTUSD.address&&this.secondToken?.address===r.XOR.address&&(await this.setFirstTokenAddress(r.XOR.address),await this.setSecondTokenAddress(r.XSTUSD.address))})),this.updateRouteAfterSelectTokens(this.firstToken,this.secondToken)}async handleConfirmAddLiquidity(){await this.handleConfirmDialog((async()=>{await this.withNotifications(this.addLiquidity),this.handleBack()}))}handleBack(){p.ZP.push({name:f.sn.Pool})}};(0,o.__decorate)([T.SB.settings.slippageTolerance],v.prototype,"slippageToleranceValue",void 0),(0,o.__decorate)([T.Yn.assets.xor],v.prototype,"xor",void 0),(0,o.__decorate)([T.Yn.wallet.account.isLoggedIn],v.prototype,"isLoggedIn",void 0),(0,o.__decorate)([T.Yn.addLiquidity.shareOfPool],v.prototype,"shareOfPool",void 0),(0,o.__decorate)([T.Yn.addLiquidity.liquidityInfo],v.prototype,"liquidityInfo",void 0),(0,o.__decorate)([T.Yn.addLiquidity.isNotFirstLiquidityProvider],v.prototype,"isNotFirstLiquidityProvider",void 0),(0,o.__decorate)([T.aD.addLiquidity.setFirstTokenAddress],v.prototype,"setFirstTokenAddress",void 0),(0,o.__decorate)([T.aD.addLiquidity.setSecondTokenAddress],v.prototype,"setSecondTokenAddress",void 0),(0,o.__decorate)([T.aD.addLiquidity.addLiquidity],v.prototype,"addLiquidity",void 0),(0,o.__decorate)([T.aD.addLiquidity.updateSubscriptions],v.prototype,"updateSubscriptions",void 0),(0,o.__decorate)([T.aD.addLiquidity.resetSubscriptions],v.prototype,"resetSubscriptions",void 0),(0,o.__decorate)([T.aD.addLiquidity.resetData],v.prototype,"resetData",void 0),(0,o.__decorate)([T.aD.addLiquidity.setDataFromLiquidity],v.prototype,"setData",void 0),(0,o.__decorate)([T.aD.addLiquidity.setFirstTokenValue],v.prototype,"setFirstTokenValue",void 0),(0,o.__decorate)([T.aD.addLiquidity.setSecondTokenValue],v.prototype,"setSecondTokenValue",void 0),(0,o.__decorate)([T.QF.addLiquidity.setFocusedField],v.prototype,"setFocusedField",void 0),(0,o.__decorate)([(0,n.RL)("isLoggedIn")],v.prototype,"handleLoggedInStateChange",null),(0,o.__decorate)([(0,n.RL)("nodeIsConnected")],v.prototype,"updateConnectionSubsriptions",null),v=(0,o.__decorate)([(0,n.wA)({components:{AddLiquidityConfirm:(0,p.kF)(f.z8.AddLiquidityConfirm),AddLiquidityTransactionDetails:(0,p.kF)(f.z8.AddLiquidityTransactionDetails),GenericPageHeader:(0,p.kF)(f.z8.GenericPageHeader),SelectToken:(0,p.kF)(f.z8.SelectToken),SlippageTolerance:(0,p.kF)(f.z8.SlippageTolerance),NetworkFeeWarningDialog:(0,p.kF)(f.z8.NetworkFeeWarningDialog),TokenInput:(0,p.kF)(f.z8.TokenInput),InfoLine:a.wx.InfoLine}})],v);var F=v,S=(0,t(1001).Z)(F,(function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.parentLoading,expression:"parentLoading"}],staticClass:"container"},[t("generic-page-header",{attrs:{"has-button-back":"",title:e.t("addLiquidity.title"),tooltip:e.t("pool.description")},on:{back:e.handleBack}}),t("s-form",{staticClass:"el-form--actions",attrs:{"show-message":!1}},[t("token-input",{attrs:{balance:e.getTokenBalance(e.firstToken),"is-select-available":"","is-max-available":e.isFirstMaxButtonAvailable,title:e.t("createPair.deposit"),token:e.firstToken,value:e.firstTokenValue,disabled:!e.areTokensSelected},on:{input:function(i){return e.handleTokenChange(i,e.setFirstTokenValue)},focus:function(i){return e.setFocusedField(e.FocusedField.First)},max:function(i){return e.handleAddLiquidityMaxValue(i,e.setFirstTokenValue)},select:function(i){return e.openSelectTokenDialog(!0)}}}),t("s-icon",{staticClass:"icon-divider",attrs:{name:"plus-16"}}),t("token-input",{attrs:{balance:e.getTokenBalance(e.secondToken),"is-select-available":"","is-max-available":e.isSecondMaxButtonAvailable,title:e.t("createPair.deposit"),token:e.secondToken,value:e.secondTokenValue,disabled:!e.areTokensSelected},on:{input:function(i){return e.handleTokenChange(i,e.setSecondTokenValue)},focus:function(i){return e.setFocusedField(e.FocusedField.Second)},max:function(i){return e.handleAddLiquidityMaxValue(i,e.setSecondTokenValue)},select:function(i){return e.openSelectTokenDialog(!1)}}}),t("slippage-tolerance",{staticClass:"slippage-tolerance-settings"}),t("s-button",{staticClass:"action-button s-typography-button--large",attrs:{type:"primary",disabled:!e.areTokensSelected||e.emptyAssets||e.isInsufficientBalance,loading:e.isSelectAssetLoading},on:{click:e.handleAddLiquidity}},[e.areTokensSelected?e.emptyAssets?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:e.isInsufficientBalance?[e._v(" "+e._s(e.t("exchange.insufficientBalance",{tokenSymbol:e.insufficientBalanceTokenSymbol}))+" ")]:[e._v(" "+e._s(e.t("createPair.supply"))+" ")]:[e._v(" "+e._s(e.t("buttons.chooseTokens"))+" ")]],2),e.areTokensSelected?[e.isAvailable&&e.isNotFirstLiquidityProvider||!e.emptyAssets?e._e():t("div",{staticClass:"info-line-container"},[t("p",{staticClass:"info-line-container__title"},[e._v(e._s(e.t("createPair.firstLiquidityProvider")))]),t("info-line",{scopedSlots:e._u([{key:"info-line-prefix",fn:function(){return[t("p",{staticClass:"info-line--first-liquidity",domProps:{innerHTML:e._s(e.t("createPair.firstLiquidityProviderInfo"))}})]},proxy:!0}],null,!1,3709695096)})],1),!e.emptyAssets||(e.liquidityInfo||{}).balance?t("add-liquidity-transaction-details",{staticClass:"info-line-container",attrs:{"info-only":!1}}):e._e()]:e._e()],2),t("select-token",{attrs:{visible:e.showSelectTokenDialog,connected:e.isLoggedIn,asset:e.isFirstTokenSelected?e.secondToken:e.firstToken,"is-main-token-providers":e.isFirstTokenSelected,"disabled-custom":e.isFirstTokenSelected},on:{"update:visible":function(i){e.showSelectTokenDialog=i},select:e.selectToken}}),t("add-liquidity-confirm",{attrs:{visible:e.showConfirmDialog,"parent-loading":e.parentLoading||e.loading,"share-of-pool":e.shareOfPool,"first-token":e.firstToken,"second-token":e.secondToken,"first-token-value":e.firstTokenValue,"second-token-value":e.secondTokenValue,price:e.price,"price-reversed":e.priceReversed,"slippage-tolerance":e.slippageToleranceValue,"insufficient-balance-token-symbol":e.insufficientBalanceTokenSymbol},on:{"update:visible":function(i){e.showConfirmDialog=i},confirm:e.handleConfirmAddLiquidity}}),t("network-fee-warning-dialog",{attrs:{visible:e.showWarningFeeDialog,fee:e.removeLiquidityFormattedFee},on:{"update:visible":function(i){e.showWarningFeeDialog=i},confirm:e.confirmNetworkFeeWariningDialog}})],1)}),[],!1,null,"52ce51d3",null).exports}}]);
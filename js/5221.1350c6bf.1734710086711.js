"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[5221],{45221:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var o=a(23166),s=(a(70560),a(97582)),l=a(86424),r=a(89445),i=a(33138),n=a(68282),c=a(69781),p=a(49053);let u=class extends((0,r.Wr)(i.Z)){constructor(...t){super(...t),(0,o.Z)(this,"collaterals",void 0),(0,o.Z)(this,"percentFormat",void 0),(0,o.Z)(this,"collapsed",void 0),(0,o.Z)(this,"property","totalDebtValue")}formatPercent(t){const e=t/n.Tv;return this.percentFormat?.format?.(e)??e*n.Tv+"%"}get prefilteredItems(){return Object.values(this.collaterals).reduce(((t,e)=>{const a=this.getAsset(e.lockedAssetId),o=this.getAsset(e.debtAssetId);if(!a||!o)return t;const s=e.riskParams.stabilityFeeAnnual.toNumber(),l=this.formatPercent(s),r=e.riskParams.liquidationRatioReversed,i=this.formatPercent(r),n=e.totalLocked.toLocaleString(2),c=this.getFPNumberFiatAmountByFPNumber(e.totalLocked,a)??this.Zero,p=c.toNumber(),u=c.toLocaleString(2),d=e.debtSupply.toLocaleString(2),b=this.getFPNumberFiatAmountByFPNumber(e.debtSupply,o)??this.Zero,m=b.toNumber(),h=b.toLocaleString(2);let g=0,f="0",k="0",v=!1;const x=e.riskParams.hardCap.sub(e.debtSupply).dp(2);if(x.isGtZero()){v=!0,f=x.toLocaleString(2);const t=this.getFPNumberFiatAmountByFPNumber(x,o)??this.Zero;g=t.toNumber(),k=t.toLocaleString(2)}return t.push({lockedAsset:a,debtAsset:o,stabilityFeeValue:s,stabilityFee:l,totalLockedValue:p,totalLocked:n,totalLockedFiat:u,totalDebtValue:m,totalDebt:d,totalDebtFiat:h,availableToBorrowValue:g,availableToBorrow:f,availableToBorrowFiat:k,isAvailable:v,maxLtv:i,maxLtvValue:r}),t}),[])}async updateExploreData(){}openSelectedPosition(t){this.isLoggedIn&&t.isAvailable&&this.$emit("open",t.lockedAsset,t.debtAsset)}updateSearch(t){this.$emit("update-search",t)}resetSearch(){this.$emit("update-search","")}};(0,s.gn)([p.SB.vault.collaterals],u.prototype,"collaterals",void 0),(0,s.gn)([p.SB.settings.percentFormat],u.prototype,"percentFormat",void 0),(0,s.gn)([p.SB.settings.menuCollapsed],u.prototype,"collapsed",void 0),u=(0,s.gn)([(0,r.wA)({components:{PairTokenLogo:(0,c.kF)(n.z8.PairTokenLogo),SortButton:(0,c.kF)(n.z8.SortButton),DataRowSkeleton:(0,c.kF)(n.z8.DataRowSkeleton),TokenLogo:l.wx.TokenLogo,FormattedAmount:l.wx.FormattedAmount,HistoryPagination:l.wx.HistoryPagination,SearchInput:l.wx.SearchInput}})],u);var d=u,b=(0,a(1001).Z)(d,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"collaterals-container container",class:{"menu-collapsed":t.collapsed}},[e("div",{staticClass:"collaterals-search"},[e("search-input",{staticClass:"search",attrs:{autofocus:"",value:t.exploreQuery,placeholder:t.t("searchText")},on:{input:t.updateSearch,clear:t.resetSearch}})],1),e("s-table",{ref:"table",staticClass:"collaterals-table explore-table",attrs:{data:t.tableItems,"highlight-current-row":!1,size:"small"},on:{"cell-click":t.openSelectedPosition}},[e("s-table-column",{attrs:{width:"250",label:"#"},scopedSlots:t._u([{key:"header",fn:function(){return[e("div",{staticClass:"explore-table-item-index"},[e("span",{directives:[{name:"button",rawName:"v-button"}],class:["explore-table-item-index--head",{active:t.isDefaultSort}],on:{click:t.handleResetSort}},[t._v(" # ")])]),e("div",{staticClass:"explore-table-item-info explore-table-item-info--head"},[e("span",{staticClass:"explore-table__primary"},[t._v("DEBT / COLLATERAL")])])]},proxy:!0},{key:"default",fn:function({$index:a,row:o}){return[e("span",{staticClass:"explore-table-item-index explore-table-item-index--body"},[t._v(t._s(a+t.startIndex+1))]),e("pair-token-logo",{staticClass:"explore-table-item-logo",attrs:{size:"small","first-token":o.debtAsset,"second-token":o.lockedAsset}}),e("div",{staticClass:"explore-table-item-info explore-table-item-info--body"},[e("div",{staticClass:"explore-table-item-name"},[t._v(t._s(o.debtAsset.symbol)+" / "+t._s(o.lockedAsset.symbol))])]),t.isLoggedIn&&o.isAvailable?e("s-icon",{attrs:{name:"plus-16",size:"12"}}):t._e()]}}])}),e("s-table-column",{attrs:{width:"140","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"stabilityFeeValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v(t._s(t.t("kensetsu.interest")))]),e("s-tooltip",{attrs:{"border-radius":"mini",content:t.t("kensetsu.interestDescription")}},[e("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1)]},proxy:!0},{key:"default",fn:function({row:a}){return[e("span",{staticClass:"explore-table__accent"},[t._v(t._s(a.stabilityFee))])]}}])}),e("s-table-column",{attrs:{width:"120","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"maxLtvValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("MAX LTV")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("span",{staticClass:"explore-table__accent"},[t._v(t._s(a.maxLtv))])]}}])}),e("s-table-column",{attrs:{"min-width":"180","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"totalLockedValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("Total locked")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("div",{staticClass:"explore-table-item-tokens"},[e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"font-size-rate":t.FontSizeRate.SMALL,value:a.totalLocked}}),e("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:a.lockedAsset}})],1),a.totalLockedFiat?e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"is-fiat-value":"","font-size-rate":t.FontSizeRate.SMALL,value:a.totalLockedFiat}})],1):t._e()])]}}])}),e("s-table-column",{attrs:{"min-width":"180","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"totalDebtValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("Total debt")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("div",{staticClass:"explore-table-item-tokens"},[e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"font-size-rate":t.FontSizeRate.SMALL,value:a.totalDebt}}),e("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:a.debtAsset}})],1),a.totalDebtFiat?e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"is-fiat-value":"","font-size-rate":t.FontSizeRate.SMALL,value:a.totalDebtFiat}})],1):t._e()])]}}])}),e("s-table-column",{attrs:{"min-width":"180","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[e("sort-button",{attrs:{name:"availableToBorrowValue",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[e("span",{staticClass:"explore-table__primary"},[t._v("Available")])])]},proxy:!0},{key:"default",fn:function({row:a}){return[e("div",{staticClass:"explore-table-item-tokens"},[e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"font-size-rate":t.FontSizeRate.SMALL,value:a.availableToBorrow}}),e("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:a.debtAsset}})],1),a.availableToBorrowFiat?e("div",{staticClass:"explore-table-cell"},[e("formatted-amount",{staticClass:"explore-table-item-token",attrs:{"is-fiat-value":"","font-size-rate":t.FontSizeRate.SMALL,value:a.availableToBorrowFiat}})],1):t._e()])]}}])})],1),e("history-pagination",{staticClass:"explore-table-pagination",attrs:{"current-page":t.currentPage,"page-amount":t.pageAmount,total:t.total,"last-page":t.lastPage,loading:t.loadingState},on:{"pagination-click":t.handlePaginationClick}})],1)}),[],!1,null,"d93b5f4c",null).exports}}]);
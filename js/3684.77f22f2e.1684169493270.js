"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[3684],{33684:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var r=a(60760),o=a(70655),s=a(52151),n=a.n(s),i=a(23512),l=a(36930),u=a(53545),d=a(50576),p=a(63637),c=a(16546),m=a(80710),h=a(85530),y=a(74614),g=a(73331),f=a(32806);const b=i.Ps`
  query AssetsQuery($after: Cursor, $ids: [String!], $dayTimestamp: Int, $weekTimestamp: Int) {
    entities: assets(after: $after, filter: { and: [{ id: { in: $ids } }, { liquidity: { greaterThan: "1" } }] }) {
      pageInfo {
        hasNextPage
        endCursor
      }
      nodes {
        id
        liquidity
        hourSnapshots: data(
          filter: { and: [{ timestamp: { greaterThanOrEqualTo: $dayTimestamp } }, { type: { equalTo: HOUR } }] }
          orderBy: [TIMESTAMP_DESC]
        ) {
          nodes {
            priceUSD
            volume
          }
        }
        daySnapshots: data(
          filter: { and: [{ timestamp: { greaterThanOrEqualTo: $weekTimestamp } }, { type: { equalTo: DAY } }] }
          orderBy: [TIMESTAMP_DESC]
        ) {
          nodes {
            priceUSD
            volume
          }
        }
      }
    }
  }
`,v=e=>e.reduce(((e,t)=>{const a=new l.FPNumber(t.volume.amountUSD);return e.add(a)}),l.FPNumber.ZERO),_=e=>({[e.id]:{reserves:l.FPNumber.fromCodecValue(e.liquidity??0),startPriceDay:new l.FPNumber(n()(e.hourSnapshots.nodes)?.priceUSD?.open??0),startPriceWeek:new l.FPNumber(n()(e.daySnapshots.nodes)?.priceUSD?.open??0),volumeDay:v(e.hourSnapshots.nodes),volumeWeek:v(e.daySnapshots.nodes)}});let x=class extends((0,u.Wr)(g.Z,f.Z)){constructor(...e){super(...e),(0,r.Z)(this,"items",void 0),(0,r.Z)(this,"tokensData",{}),(0,r.Z)(this,"order",p.Sr.DESC),(0,r.Z)(this,"property","tvl")}get hasTokensData(){return 0!==Object.keys(this.tokensData).length}get preparedItems(){return Object.entries(this.tokensData).reduce(((e,[t,a])=>{const r=this.getAsset(t);if(!r)return e;const o=l.FPNumber.fromCodecValue(this.getAssetFiatPrice(r)??0),s=a?.startPriceDay??l.FPNumber.ZERO,n=a?.startPriceWeek??l.FPNumber.ZERO,i=a?.volumeDay??l.FPNumber.ZERO,u=a?.volumeWeek??l.FPNumber.ZERO,d=(0,h._Q)(o,s),p=(0,h._Q)(o,n),c=(a?.reserves??l.FPNumber.ZERO).mul(o),m=c.isZero()?l.FPNumber.ZERO:u.div(c);return e.push({...r,price:o.toNumber(),priceFormatted:new l.FPNumber(o.toFixed(7)).toLocaleString(),priceChangeDay:d.toNumber(),priceChangeDayFP:d,priceChangeWeek:p.toNumber(),priceChangeWeekFP:p,volumeDay:i.toNumber(),volumeDayFormatted:(0,h.kF)(i),tvl:c.toNumber(),tvlFormatted:(0,h.kF)(c),velocity:m.toNumber(),velocityFormatted:String(m.toNumber(2))}),e}),[])}async updateExploreData(){await this.withLoading((async()=>{await this.withParentLoading((async()=>{this.tokensData=Object.freeze(await this.fetchTokensData())}))}))}async fetchTokensData(){const e=300*Math.floor(Date.now()/3e5),t=e-86400,a=e-604800,r={ids:this.items.map((e=>e.address)),dayTimestamp:t,weekTimestamp:a},o=await d.m5.fetchAllEntities(b,r,_);return o?o.reduce(((e,t)=>({...e,...t})),{}):{}}};(0,o.__decorate)([y.Yn.assets.whitelistAssets],x.prototype,"items",void 0),x=(0,o.__decorate)([(0,u.wA)({components:{PriceChange:(0,m.kF)(c.z8.PriceChange),SortButton:(0,m.kF)(c.z8.SortButton),TokenAddress:d.wx.TokenAddress,TokenLogo:d.wx.TokenLogo,FormattedAmount:d.wx.FormattedAmount,HistoryPagination:d.wx.HistoryPagination}})],x);var k=x,C=(0,a(1001).Z)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("s-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingState,expression:"loadingState"}],ref:"table",staticClass:"explore-table",attrs:{data:e.tableItems,"highlight-current-row":!1,size:"small"}},[a("s-table-column",{attrs:{width:"280",label:"#","fixed-position":"left"},scopedSlots:e._u([{key:"header",fn:function(){return[a("div",{staticClass:"explore-table-item-index"},[a("span",{class:["explore-table-item-index--head",{active:e.isDefaultSort}],on:{click:e.handleResetSort}},[e._v(" # ")])]),a("div",{staticClass:"explore-table-item-logo"},[a("s-icon",{staticClass:"explore-table-item-logo--head",attrs:{name:"various-bone-24",size:"14px"}})],1),a("div",{staticClass:"explore-table-item-info explore-table-item-info--head"},[a("span",{staticClass:"explore-table__primary"},[e._v(e._s(e.t("nameText")))]),a("span",{staticClass:"explore-table__secondary"},[e._v("("+e._s(e.t("tokens.assetId"))+")")])])]},proxy:!0},{key:"default",fn:function(t){var r=t.$index,o=t.row;return[a("span",{staticClass:"explore-table-item-index explore-table-item-index--body"},[e._v(e._s(r+e.startIndex+1))]),a("token-logo",{staticClass:"explore-table-item-logo",attrs:{"token-symbol":o.symbol}}),a("div",{staticClass:"explore-table-item-info explore-table-item-info--body"},[a("div",{staticClass:"explore-table-item-name"},[e._v(e._s(o.symbol))]),a("div",{staticClass:"explore-table__secondary"},[e._v(e._s(o.name))]),a("div",{staticClass:"explore-table-item-address"},[a("token-address",{staticClass:"explore-table-item-address__value",attrs:{"show-name":!1,name:o.name,symbol:o.symbol,address:o.address}})],1)])]}}])}),e.pricesAvailable?a("s-table-column",{key:"price",attrs:{width:"130","header-align":"left",align:"left"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"price",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("Price")])])]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[a("formatted-amount",{staticClass:"explore-table-item-price",attrs:{"is-fiat-value":"","fiat-default-rounding":"","font-weight-rate":e.FontWeightRate.MEDIUM,value:r.priceFormatted}})]}}],null,!1,3821265831)}):e._e(),e.hasTokensData?[a("s-table-column",{attrs:{width:"104","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"priceChangeDay",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("1D %")])])]},proxy:!0},{key:"default",fn:function(e){var t=e.row;return[a("price-change",{attrs:{value:t.priceChangeDayFP}})]}}],null,!1,3047827492)}),a("s-table-column",{attrs:{width:"104","header-align":"left",align:"left"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"priceChangeWeek",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("7D %")])])]},proxy:!0},{key:"default",fn:function(e){var t=e.row;return[a("price-change",{attrs:{value:t.priceChangeWeekFP}})]}}],null,!1,2114517730)}),a("s-table-column",{attrs:{width:"104","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"volumeDay",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("1D Vol.")])])]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"is-fiat-value":"","font-weight-rate":e.FontWeightRate.MEDIUM,value:r.volumeDayFormatted.amount}},[e._v(" "+e._s(r.volumeDayFormatted.suffix)+" ")])]}}],null,!1,2245760288)}),a("s-table-column",{attrs:{width:"104","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"tvl",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v(e._s(e.TranslationConsts.TVL))]),a("s-tooltip",{attrs:{"border-radius":"mini",content:e.t("tooltips.tvl")}},[a("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1)]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"is-fiat-value":"","font-weight-rate":e.FontWeightRate.MEDIUM,value:r.tvlFormatted.amount}},[e._v(" "+e._s(r.tvlFormatted.suffix)+" ")])]}}],null,!1,2220507479)}),a("s-table-column",{attrs:{width:"88","header-align":"right",align:"right"},scopedSlots:e._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"velocity",sort:{order:e.order,property:e.property}},on:{"change-sort":e.changeSort}},[a("span",{staticClass:"explore-table__primary"},[e._v("VC.")]),a("s-tooltip",{attrs:{"border-radius":"mini"},scopedSlots:e._u([{key:"content",fn:function(){return[a("div",[e._v(e._s(e.t("tooltips.velocity")))]),a("br"),a("span",{staticStyle:{"font-weight":"500"}},[e._v("Velocity = Trading Volume USD / Market Cap USD")])]},proxy:!0}],null,!1,4378801)},[a("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1)]},proxy:!0},{key:"default",fn:function(t){var r=t.row;return[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"font-weight-rate":e.FontWeightRate.MEDIUM,value:r.velocityFormatted}})]}}],null,!1,1611012200)})]:e._e()],2),a("history-pagination",{staticClass:"explore-table-pagination",attrs:{"current-page":e.currentPage,"page-amount":e.pageAmount,total:e.total,"last-page":e.lastPage,loading:e.loadingState},on:{"pagination-click":e.handlePaginationClick}})],1)}),[],!1,null,null,null).exports}}]);
"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[7832],{97832:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=a(23166),i=a(97582),n=a(37981),r=a(86424),o=a(89445),d=a(50149);let l=class extends((0,o.Wr)(d.Z,r.tA.DialogMixin,r.tA.TransactionMixin)){constructor(...e){super(...e),(0,s.Z)(this,"isAdding",void 0),(0,s.Z)(this,"rewardsDestination",""),(0,s.Z)(this,"payoutNetworkFee",null)}setRewardsDestination(){this.visible&&(this.rewardsDestination=this.payeeAddress)}get payeeAddress(){switch(this.payee){case"Stash":return this.stash;case"Controller":return this.controller;default:return this.payee}}async handlePendingRewardsChange(){this.payoutNetworkFee=await this.getPayoutNetworkFee({payouts:this.pendingRewards?this.pendingRewards.map((e=>({era:e.era,validators:e.validators.map((e=>e.address))}))):[],payee:this.rewardsDestination!==this.payeeAddress?this.rewardsDestination:void 0})}get networkFee(){return this.payoutNetworkFee??"0"}get title(){return this.t("soraStaking.claimRewardsDialog.title")}get inputTitle(){return this.title}get rewardedFundsCodec(){return this.rewardedFunds.toCodecString()}get part(){return this.rewardedFunds.div(n.FPNumber.HUNDRED)}get valueFundsEmpty(){return this.rewardedFunds.isZero()}get stakingBalance(){return this.availableFunds}get stakingBalanceCodec(){return this.stakingBalance.toCodecString()}get isInsufficientBalance(){return n.FPNumber.lt(this.rewardedFunds,this.rewardedFunds)}get selectedValidatorsFormatted(){return this.t("soraStaking.selectedValidators",{count:this.selectedValidators.length,max:this.validators.length})}get payouts(){return this.pendingRewards?this.pendingRewards.map((e=>({era:e.era,validators:e.validators.map((e=>e.address))}))):[]}async handleConfirm(){await this.withNotifications((async()=>{await this.payout({payouts:this.payouts,payee:this.rewardsDestination!==this.payeeAddress?this.rewardsDestination:void 0}),await this.getPendingRewards(),this.closeDialog()}))}checkPendingRewards(){this.$emit("show-rewards")}};(0,i.gn)([(0,o.fI)({default:()=>!0,type:Boolean})],l.prototype,"isAdding",void 0),(0,i.gn)([(0,o.RL)("visible",{immediate:!0}),(0,o.RL)("payeeAddress",{immediate:!0})],l.prototype,"setRewardsDestination",null),(0,i.gn)([(0,o.RL)("pendingRewards",{immediate:!0})],l.prototype,"handlePendingRewardsChange",null),l=(0,i.gn)([(0,o.wA)({components:{FormattedAmount:r.wx.FormattedAmount,DialogBase:r.wx.DialogBase,InfoLine:r.wx.InfoLine,TokenLogo:r.wx.TokenLogo,FormattedAmountWithFiatValue:r.wx.FormattedAmountWithFiatValue}})],l);var u=l,c=(0,a(1001).Z)(u,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("dialog-base",{attrs:{visible:e.isVisible,title:e.title},on:{"update:visible":function(t){e.isVisible=t}}},[t("div",{staticClass:"claim-rewards-dialog"},[t("div",{staticClass:"reward"},[t("formatted-amount-with-fiat-value",{staticClass:"reward-amount",attrs:{"symbol-as-decimal":"","value-can-be-hidden":"",value:e.rewardedFundsFormatted,"fiat-value":e.rewardedFundsFiat}}),e.rewardAsset?[t("token-logo",{staticClass:"reward-logo",attrs:{tokenSymbol:e.rewardAsset.symbol}}),t("span",{staticClass:"reward-symbol"},[e._v(" "+e._s(e.rewardAsset.symbol)+" ")])]:e._e()],2),t("s-input",{attrs:{placeholder:e.t("soraStaking.claimRewardsDialog.rewardsDestination"),suffix:"s-icon-basic-user-24",disabled:!0},model:{value:e.rewardsDestination,callback:function(t){e.rewardsDestination=t},expression:"rewardsDestination"}}),t("div",{staticClass:"info"},[t("info-line",{attrs:{label:e.t("networkFeeText"),"label-tooltip":e.t("networkFeeTooltipText"),value:e.networkFeeFormatted,"asset-symbol":e.xor?.symbol,"fiat-value":e.getFiatAmountByCodecString(e.networkFee),"is-formatted":""}})],1),e.xor&&e.rewardAsset?t("s-button",{staticClass:"s-typography-button--large action-button",attrs:{type:"primary",loading:e.parentLoading||e.loading,disabled:e.isInsufficientXorForFee||e.valueFundsEmpty||e.isInsufficientBalance},on:{click:e.handleConfirm}},[e.isInsufficientXorForFee||e.isInsufficientBalance?[e.isInsufficientBalance?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.rewardAsset.symbol}))+" ")]:e._e(),e.isInsufficientXorForFee?[e._v(" "+e._s(e.t("insufficientBalanceText",{tokenSymbol:e.xor.symbol}))+" ")]:e._e()]:e.valueFundsEmpty?[e._v(" "+e._s(e.t("buttons.enterAmount"))+" ")]:[e._v(" "+e._s(e.t("confirmText"))+" ")]],2):e._e(),e.pendingRewards?t("div",{directives:[{name:"button",rawName:"v-button"}],staticClass:"check-pending-rewards",on:{click:e.checkPendingRewards}},[e._v(" "+e._s(e.t("soraStaking.claimRewardsDialog.checkRewards"))+" ("+e._s(e.pendingRewards.length??0)+") ")]):e._e()],1)])}),[],!1,null,"61c26a61",null).exports}}]);
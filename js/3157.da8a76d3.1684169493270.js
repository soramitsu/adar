"use strict";(self.webpackChunkadar=self.webpackChunkadar||[]).push([[3157],{13157:function(t,e,a){a.r(e),a.d(e,{default:function(){return x}});var s=a(60760),o=a(70655),r=a(53545),i=a(50576),l=a(36930),n=a(63637),c=a(73331),u=a(32806),d=a(24380),p=a(74614),m=a(80710),b=a(16546),h=a(85530);let g=class extends((0,r.Wr)(c.Z,u.Z,d.Z)){constructor(...t){super(...t),(0,s.Z)(this,"accountLiquidity",void 0),(0,s.Z)(this,"whitelist",void 0),(0,s.Z)(this,"order",n.Sr.DESC),(0,s.Z)(this,"property","tvl"),(0,s.Z)(this,"poolReserves",{})}get items(){return Object.entries(this.poolReserves).reduce(((t,[e,a])=>{if(a.some((t=>(0,h.yA)(t))))return t;const s=e.match(/0x\w{64}/g);if(!(s&&s[0]&&s[1]&&this.whitelist[s[0]]&&this.whitelist[s[1]]))return t;const o=this.getAsset(s[0]),r=this.getAsset(s[1]);if(!o||!r)return t;const i=`${o.symbol}-${r.symbol}`,n=this.accountLiquidity.find((t=>t.firstAddress===o.address&&t.secondAddress===r.address)),c=l.FPNumber.fromCodecValue(this.getAssetFiatPrice(o)??0),u=l.FPNumber.fromCodecValue(a[0]??0),d=l.FPNumber.fromCodecValue(this.getPoolApy(o.address,r.address)??0).mul(l.FPNumber.HUNDRED),p=c.mul(u).mul(new l.FPNumber(2)),m=[{asset:o,balance:(0,h.Gc)(l.FPNumber.fromCodecValue(n?.firstBalance??0)),balancePrefix:n?"~":""},{asset:r,balance:(0,h.Gc)(l.FPNumber.fromCodecValue(n?.secondBalance??0)),balancePrefix:n?"~":""}];return t.push({name:i,baseAsset:o,targetAsset:r,apy:d.toNumber(),apyFormatted:(0,h.Gc)(d,!0),tvl:p.toNumber(),tvlFormatted:(0,h.kF)(p),isAccountItem:!!n,accountTokens:m}),t}),[])}get preparedItems(){return this.isAccountItems?this.items.filter((t=>t.isAccountItem)):this.items}get hasApyColumnData(){return this.items.some((t=>0!==t.apy))}async updateExploreData(){await this.withLoading((async()=>{await this.withParentLoading((async()=>{this.poolReserves=Object.freeze(await i.hi.poolXyk.getAllReserves())}))}))}};(0,o.__decorate)([p.SB.pool.accountLiquidity],g.prototype,"accountLiquidity",void 0),(0,o.__decorate)([p.Yn.wallet.account.whitelist],g.prototype,"whitelist",void 0),g=(0,o.__decorate)([(0,r.wA)({components:{PairTokenLogo:(0,m.kF)(b.z8.PairTokenLogo),SortButton:(0,m.kF)(b.z8.SortButton),TokenLogo:i.wx.TokenLogo,FormattedAmount:i.wx.FormattedAmount,HistoryPagination:i.wx.HistoryPagination}})],g);var f=g,x=(0,a(1001).Z)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("s-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingState,expression:"loadingState"}],ref:"table",staticClass:"explore-table",attrs:{data:t.tableItems,"highlight-current-row":!1,size:"small"}},[a("s-table-column",{attrs:{width:"240",label:"#","fixed-position":"left"},scopedSlots:t._u([{key:"header",fn:function(){return[a("div",{staticClass:"explore-table-item-index"},[a("span",{class:["explore-table-item-index--head",{active:t.isDefaultSort}],on:{click:t.handleResetSort}},[t._v(" # ")])]),a("div",{staticClass:"explore-table-item-logo"},[a("s-icon",{staticClass:"explore-table-item-logo--head",attrs:{name:"various-bone-24",size:"14px"}})],1),a("div",{staticClass:"explore-table-item-info explore-table-item-info--head"},[a("span",{staticClass:"explore-table__primary"},[t._v(t._s(t.t("nameText")))])])]},proxy:!0},{key:"default",fn:function(e){var s=e.$index,o=e.row;return[a("span",{staticClass:"explore-table-item-index explore-table-item-index--body"},[t._v(t._s(s+t.startIndex+1))]),a("pair-token-logo",{staticClass:"explore-table-item-logo",attrs:{"first-token":o.baseAsset,"second-token":o.targetAsset,size:"small"}}),a("div",{staticClass:"explore-table-item-info explore-table-item-info--body"},[a("div",{staticClass:"explore-table-item-name"},[t._v(t._s(o.baseAsset.symbol)+"-"+t._s(o.targetAsset.symbol))])])]}}])}),t.hasApyColumnData?a("s-table-column",{key:"apy",attrs:{width:"120","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"apy",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[a("span",{staticClass:"explore-table__primary"},[t._v("APY")])])]},proxy:!0},{key:"default",fn:function(e){var s=e.row;return[a("span",{staticClass:"explore-table__accent"},[t._v(t._s(s.apyFormatted))])]}}],null,!1,1563531116)}):t._e(),t.isLoggedIn?a("s-table-column",{key:"logged",attrs:{width:"140","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[a("span",{staticClass:"explore-table__primary"},[t._v(t._s(t.t("balanceText")))])]},proxy:!0},{key:"default",fn:function(e){var s=e.row;return[a("div",{staticClass:"explore-table-item-tokens"},t._l(s.accountTokens,(function(e,s){var o=e.asset,r=e.balance,i=e.balancePrefix;return a("div",{key:s,staticClass:"explore-table-cell"},[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"value-can-be-hidden":"","font-size-rate":t.FontSizeRate.SMALL,value:r},scopedSlots:t._u([{key:"prefix",fn:function(){return[t._v(t._s(i))]},proxy:!0}],null,!0)}),a("token-logo",{staticClass:"explore-table-item-logo explore-table-item-logo--plain",attrs:{size:"small",token:o}})],1)})),0)]}}],null,!1,596145239)}):t._e(),t.pricesAvailable?a("s-table-column",{key:"tvl",attrs:{width:"104","header-align":"right",align:"right"},scopedSlots:t._u([{key:"header",fn:function(){return[a("sort-button",{attrs:{name:"tvl",sort:{order:t.order,property:t.property}},on:{"change-sort":t.changeSort}},[a("span",{staticClass:"explore-table__primary"},[t._v(t._s(t.TranslationConsts.TVL))]),a("s-tooltip",{attrs:{"border-radius":"mini",content:t.t("tooltips.tvl")}},[a("s-icon",{attrs:{name:"info-16",size:"14px"}})],1)],1)]},proxy:!0},{key:"default",fn:function(e){var s=e.row;return[a("formatted-amount",{staticClass:"explore-table-item-price explore-table-item-amount",attrs:{"is-fiat-value":"","font-weight-rate":t.FontWeightRate.MEDIUM,value:s.tvlFormatted.amount}},[t._v(" "+t._s(s.tvlFormatted.suffix)+" ")])]}}],null,!1,2220507479)}):t._e()],1),a("history-pagination",{staticClass:"explore-table-pagination",attrs:{"current-page":t.currentPage,"page-amount":t.pageAmount,total:t.total,"last-page":t.lastPage,loading:t.loadingState},on:{"pagination-click":t.handlePaginationClick}})],1)}),[],!1,null,null,null).exports}}]);